<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This manual is for Eglot, the Emacs LSP client.

Copyright Â© 2022-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual",
and with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<title>Eglot: The Emacs Client for the Language Server Protocol</title>

<meta name="description" content="Eglot: The Emacs Client for the Language Server Protocol">
<meta name="keywords" content="Eglot: The Emacs Client for the Language Server Protocol">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Top" rel="start" title="Top">
<link href="#Index" rel="index" title="Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="#Quick-Start" rel="next" title="Quick Start">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter-printindex {text-decoration: none}
div.center {text-align:center}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
pre.display-preformatted {font-family: inherit}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
td.printindex-index-entry {vertical-align: top}
td.printindex-index-section {vertical-align: top; padding-left: 1em}
th.entries-header-printindex {text-align:left}
th.sections-header-printindex {text-align:left; padding-left: 1em}
ul.mark-bullet {list-style-type: disc}
ul.mark-minus {list-style-type: "\2212"}
ul.toc-numbered-mark {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="eglot-manual.css">


</head>

<body lang="en">





<div class="top-level-extent" id="Top">
<div class="nav-panel">
<p>
Next: <a href="#Quick-Start" accesskey="n" rel="next">Quick Start</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="top" id="Eglot"><span>Eglot<a class="copiable-link" href="#Eglot"> &para;</a></span></h1>

<a class="index-entry-id" id="index-LSP"></a>
<a class="index-entry-id" id="index-language-server-protocol"></a>
<p>Eglot is the Emacs client for the <em class="dfn">Language Server Protocol</em>
(<abbr class="acronym">LSP</abbr>).  The name &ldquo;Eglot&rdquo; is an acronym that stands for
&ldquo;<em class="emph">E</em>macs Poly<em class="emph">glot</em>&rdquo;.
<a class="footnote" id="DOCF1" href="#FOOT1"><sup>1</sup></a> Eglot provides infrastructure and a set of commands for
enriching the source code editing capabilities of Emacs via LSP.  LSP
is a standardized communications protocol between source code editors
(such as Emacs) and language servers&mdash;programs external to Emacs which
analyze the source code on behalf of Emacs.  The protocol allows Emacs
to receive various source code services from the server, such as
description and location of function calls, types of variables, class
definitions, syntactic errors, etc.  This way, Emacs doesn&rsquo;t need to
implement the language-specific parsing and analysis capabilities in its
own code, but is still capable of providing sophisticated editing
features that rely on such capabilities, such as automatic code
completion, go-to definition of function/class, documentation of symbol
at-point, refactoring, on-the-fly diagnostics, and more.
</p>
<p>Eglot itself is completely language-agnostic, but it can support any
programming language for which there is a language server and an Emacs
major mode.
</p>
<p>This manual documents how to configure, use, and customize Eglot.
</p>
<p>This manual is for Eglot, the Emacs LSP client.
</p>
<p>Copyright &copy; 2022&ndash;2025 Free Software Foundation, Inc.
</p>
<blockquote class="quotation">
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being &ldquo;A GNU Manual&rdquo;,
and with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled &ldquo;GNU Free Documentation License&rdquo;.
</p>
<p>(a) The FSF&rsquo;s Back-Cover Text is: &ldquo;You have the freedom to copy and
modify this GNU manual.&rdquo;
</p></blockquote>


<div class="element-contents" id="SEC_Contents">
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="toc-numbered-mark">
  <li><a id="toc-Quick-Start-1" href="#Quick-Start">1 Quick Start</a></li>
  <li><a id="toc-Eglot-and-LSP-Servers-1" href="#Eglot-and-LSP-Servers">2 Eglot and LSP Servers</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Setting-Up-LSP-Servers-1" href="#Setting-Up-LSP-Servers">2.1 Setting Up LSP Servers</a></li>
    <li><a id="toc-Starting-Eglot-1" href="#Starting-Eglot">2.2 Starting Eglot</a></li>
    <li><a id="toc-Shutting-Down-LSP-Servers-1" href="#Shutting-Down-LSP-Servers">2.3 Shutting Down LSP Servers</a></li>
  </ul></li>
  <li><a id="toc-Using-Eglot-1" href="#Using-Eglot">3 Using Eglot</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Eglot-Features-1" href="#Eglot-Features">3.1 Eglot Features</a></li>
    <li><a id="toc-Buffers_002c-Projects_002c-and-Eglot" href="#Eglot-and-Buffers">3.2 Buffers, Projects, and Eglot</a></li>
    <li><a id="toc-Eglot-Commands-1" href="#Eglot-Commands">3.3 Eglot Commands</a></li>
  </ul></li>
  <li><a id="toc-Customizing-Eglot-1" href="#Customizing-Eglot">4 Customizing Eglot</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Customization-Variables-1" href="#Customization-Variables">4.1 Customization Variables</a></li>
    <li><a id="toc-Other-Variables-1" href="#Other-Variables">4.2 Other Variables</a></li>
    <li><a id="toc-More-Customization-1" href="#More-Customization">4.3 More Customization</a></li>
  </ul></li>
  <li><a id="toc-Advanced-server-configuration-1" href="#Advanced-server-configuration">5 Advanced server configuration</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Project_002dspecific-configuration-1" href="#Project_002dspecific-configuration">5.1 Project-specific configuration</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Examples" href="#Examples">5.1.1 Examples</a></li>
    </ul></li>
    <li><a id="toc-User_002dspecific-configuration-1" href="#User_002dspecific-configuration">5.2 User-specific configuration</a></li>
    <li><a id="toc-JSONRPC-objects-in-Elisp-1" href="#JSONRPC-objects-in-Elisp">5.3 JSONRPC objects in Elisp</a></li>
  </ul></li>
  <li><a id="toc-Extending-Eglot-1" href="#Extending-Eglot">6 Extending Eglot</a></li>
  <li><a id="toc-Troubleshooting-Eglot-1" href="#Troubleshooting-Eglot">7 Troubleshooting Eglot</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Performance-1" href="#Performance">7.1 Performance</a></li>
    <li><a id="toc-Getting-the-latest-version-1" href="#Getting-the-latest-version">7.2 Getting the latest version</a></li>
    <li><a id="toc-Reporting-bugs-1" href="#Reporting-bugs">7.3 Reporting bugs</a></li>
  </ul></li>
  <li><a id="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a></li>
  <li><a id="toc-Index-1" href="#Index" rel="index">Index</a></li>
</ul>
</div>
</div>
<hr>
<div class="chapter-level-extent" id="Quick-Start">
<div class="nav-panel">
<p>
Next: <a href="#Eglot-and-LSP-Servers" accesskey="n" rel="next">Eglot and LSP Servers</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Eglot</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Quick-Start-1"><span>1 Quick Start<a class="copiable-link" href="#Quick-Start-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-quick-start"></a>

<p>This chapter provides concise instructions for setting up and using
Eglot with your programming project in common usage scenarios.  For more
detailed instructions regarding Eglot setup, see <a class="pxref" href="#Eglot-and-LSP-Servers">Eglot and LSP Servers</a>.  See <a class="xref" href="#Using-Eglot">Using Eglot</a>, for detailed description of using Eglot,
and see <a class="ref" href="#Customizing-Eglot">Customizing Eglot</a>, for adapting Eglot to less common use
patterns.
</p>
<p>Here&rsquo;s how to start using Eglot with your programming project:
</p>
<ol class="enumerate">
<li> Select and install a language server.

<p>Eglot comes pre-configured for many popular language servers, see the
value of <code class="code">eglot-server-programs</code>.  If the server(s) mentioned there
satisfy your needs for the programming language(s) with which you want
to use Eglot, you just need to make sure those servers are installed on
your system and Eglot can find them.
</p>
<p>Alternatively, install one or more servers of your choice and tell Eglot
where to find them.  To do that, you may add to the value of
<code class="code">eglot-server-programs</code>, as described in <a class="ref" href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a> or have Eglot prompt you about it (see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).
</p>
</li><li> Turn on Eglot for your project.

<p>To start using Eglot for a project, type <kbd class="kbd">M-x eglot <kbd class="key">RET</kbd></kbd> in a
buffer visiting any file that belongs to the project.  This starts the
language server configured for the programming language of that buffer,
and causes Eglot to start <em class="dfn">managing</em> file-visiting buffers related
to that programming language.  This includes files that are already
visited at the time the <code class="code">eglot</code> command is invoked, as well as any
files visited after this invocation.
</p>
<p>The notion of a &ldquo;project&rdquo; used by Eglot is the same Emacs uses
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Projects">Projects</a> in <cite class="cite">GNU Emacs Manual</cite>): in the simplest case, the
&ldquo;project&rdquo; is the single file you are editing, but it can also be all
the files in a single directory or a directory tree under some version
control system, such as Git.
</p>
<p>There are alternate ways of starting Eglot; see <a class="ref" href="#Starting-Eglot">Starting Eglot</a>
for details.
</p>
</li><li> Use Eglot.

<p>Most Eglot facilities are integrated into Emacs features, such as ElDoc,
Flymake, Xref, and Imenu.  However, Eglot also provides commands of its
own, mainly to perform tasks by the language server, such as <kbd class="kbd">M-x
eglot-rename</kbd> (to rename an identifier across the entire project),
<kbd class="kbd">M-x eglot-format</kbd> (to reformat and reindent code), and some others.
See <a class="xref" href="#Eglot-Commands">Eglot Commands</a>, for the detailed list of Eglot commands.
</p>
</li><li> That&rsquo;s it!
</li></ol>

<hr>
</div>
<div class="chapter-level-extent" id="Eglot-and-LSP-Servers">
<div class="nav-panel">
<p>
Next: <a href="#Using-Eglot" accesskey="n" rel="next">Using Eglot</a>, Previous: <a href="#Quick-Start" accesskey="p" rel="prev">Quick Start</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Eglot-and-LSP-Servers-1"><span>2 Eglot and LSP Servers<a class="copiable-link" href="#Eglot-and-LSP-Servers-1"> &para;</a></span></h2>

<p>This chapter describes how to set up Eglot for your needs, and how to
start it.
</p>

<ul class="mini-toc">
<li><a href="#Setting-Up-LSP-Servers" accesskey="1">Setting Up LSP Servers</a></li>
<li><a href="#Starting-Eglot" accesskey="2">Starting Eglot</a></li>
<li><a href="#Shutting-Down-LSP-Servers" accesskey="3">Shutting Down LSP Servers</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Setting-Up-LSP-Servers">
<div class="nav-panel">
<p>
Next: <a href="#Starting-Eglot" accesskey="n" rel="next">Starting Eglot</a>, Up: <a href="#Eglot-and-LSP-Servers" accesskey="u" rel="up">Eglot and LSP Servers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Setting-Up-LSP-Servers-1"><span>2.1 Setting Up LSP Servers<a class="copiable-link" href="#Setting-Up-LSP-Servers-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-setting-up-LSP-server-for-Eglot"></a>
<a class="index-entry-id" id="index-LSP-server-for-Eglot_002c-setting-up"></a>
<a class="index-entry-id" id="index-language-server-for-Eglot"></a>

<p>For Eglot to be useful, it must first be combined with a suitable
language server.  Usually, that means running the server program locally
as a child process of Emacs (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Processes">Processes</a> in <cite class="cite">GNU Emacs Lisp
Reference Manual</cite>) and communicating with it via the standard input and
output streams.
</p>
<p>The language server program must be installed separately, and is not
further discussed in this manual; refer to the documentation of the
particular server(s) you want to install.
</p>
<p>To use a language server, Eglot must know how to start it and which
programming languages each server supports.  This information is
commonly provided by the variable <code class="code">eglot-server-programs</code>.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-eglot_002dserver_002dprograms"><span class="category-def">Variable: </span><span><strong class="def-name">eglot-server-programs</strong><a class="copiable-link" href="#index-eglot_002dserver_002dprograms"> &para;</a></span></dt>
<dd><p>This variable associates major modes with names and command-line
arguments of the language server programs corresponding to the
programming language of each major mode.  It provides all the
information that Eglot needs to know about the programming language of
the source you are editing.
</p>
<p>The value of the variable is an alist, whose elements are of the form
<code class="code">(<var class="var">major-mode</var>&nbsp;.&nbsp;<var class="var">server</var>)</code><!-- /@w -->.
</p>
<p>The <var class="var">major-mode</var> of the alist elements can be either a symbol of an
Emacs major mode or a list of the form <code class="code">(<var class="var">mode</var>&nbsp;:language-id&nbsp;<var class="var">id</var>)</code><!-- /@w -->, with <var class="var">mode</var> being a major-mode symbol and <var class="var">id</var> a
string that identifies the language to the server (if Eglot cannot by
itself convert the major-mode to the language identifier string required
by the server).  In addition, <var class="var">major-mode</var> can be a list of several
major modes specified in one of the above forms &ndash; this means a running
instance of the associated server is responsible for files of multiple
major modes or languages in the project.
</p>
<p>The <var class="var">server</var> part of the alist elements can be one of the following:
</p>
<dl class="table">
<dt><code class="code">(<var class="var">program</var> <var class="var">args</var>&hellip;)</code></dt>
<dd><p>This says to invoke <var class="var">program</var> with zero or more arguments
<var class="var">args</var>; the program is expected to communicate with Emacs via the
standard input and standard output streams.
</p>
</dd>
<dt><code class="code">(<var class="var">program</var> <var class="var">args</var>&hellip; :initializationOptions <var class="var">options</var>&hellip;)</code></dt>
<dd><p><var class="var">program</var> is invoked with <var class="var">args</var> but <var class="var">options</var> specifies how
to construct the &lsquo;<samp class="samp">:initializationOptions</samp>&rsquo; JSON object to pass the
server on during the LSP handshake (see <a class="pxref" href="#Advanced-server-configuration">Advanced server configuration</a>).
</p>
</dd>
<dt><code class="code">(<var class="var">host</var> <var class="var">port</var> <var class="var">args</var>&hellip;)</code></dt>
<dd><p>Here <var class="var">host</var> is a string and <var class="var">port</var> is a positive integer
specifying a TCP connection to a remote server.  The <var class="var">args</var> are
passed to <code class="code">open-network-stream</code>, e.g. if the connection needs to
use encryption or other non-default parameters (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Network">Network</a> in <cite class="cite">GNU Emacs Lisp Reference Manual</cite>).
</p>
</dd>
<dt><code class="code">(<var class="var">program</var> <var class="var">args</var>&hellip; :autoport <var class="var">moreargs</var>&hellip;)</code></dt>
<dd><p><var class="var">program</var> is started with a command line constructed from <var class="var">args</var>
followed by an available server port and the rest of arguments in
<var class="var">moreargs</var>; Eglot then establishes a TCP connection with the server
via that port on the local host.
</p>
</dd>
<dt><code class="code"><var class="var">function</var></code></dt>
<dd><p>This should be a function of a single argument: non-<code class="code">nil</code> if the
connection was requested interactively (e.g., by the <code class="code">eglot</code>
command), otherwise <code class="code">nil</code>.  The function should return a value of
any of the forms described above.  This allows interaction with the user
for determining the program to start and its command-line arguments.
</p></dd>
</dl>

</dd></dl>

<p>Eglot comes with a fairly complete set of associations of major-modes to
popular language servers predefined.  If you need to add server
associations to the default list, use <code class="code">add-to-list</code>.  For example,
if there is a hypothetical language server program <code class="command">fools</code> for
the language <code class="code">Foo</code> which is supported by an Emacs major-mode
<code class="code">foo-mode</code>, you can add it to the alist like this:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               '(foo-mode . (&quot;fools&quot; &quot;--stdio&quot;))))
</pre></div>

<p>This will invoke the program <code class="command">fools</code> with the command-line
argument <samp class="option">--stdio</samp> in support of editing source files for which
Emacs turns on <code class="code">foo-mode</code>, and will communicate with the program
via the standard streams.  As usual with invoking programs, the
executable file <samp class="file">fools</samp> should be in one of the directories
mentioned by the <code class="code">exec-path</code> variable (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Subprocess-Creation">Subprocess
Creation</a> in <cite class="cite">GNU Emacs Lisp Reference Manual</cite>), for Eglot to be
able to find it.
</p>
<p>Sometimes, multiple servers are acceptable alternatives for handling a
given major-mode.  In those cases, you may combine the helper function
<code class="code">eglot-alternatives</code> with the functional form of
<code class="code">eglot-server-programs</code>.
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               `(foo-mode . ,(eglot-alternatives
                               '((&quot;fools&quot; &quot;--stdio&quot;)
                                 (&quot;phewls&quot; &quot;--fast&quot;))))))
</pre></div>

<p>If you have <code class="command">fools</code> and <code class="command">phewls</code> installed, the function
produced by <code class="code">eglot-alternatives</code> will prompt for the server to use
in <code class="code">foo-mode</code> buffers.  Else it will use whichever is available.
</p>
<hr>
</div>
<div class="section-level-extent" id="Starting-Eglot">
<div class="nav-panel">
<p>
Next: <a href="#Shutting-Down-LSP-Servers" accesskey="n" rel="next">Shutting Down LSP Servers</a>, Previous: <a href="#Setting-Up-LSP-Servers" accesskey="p" rel="prev">Setting Up LSP Servers</a>, Up: <a href="#Eglot-and-LSP-Servers" accesskey="u" rel="up">Eglot and LSP Servers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Starting-Eglot-1"><span>2.2 Starting Eglot<a class="copiable-link" href="#Starting-Eglot-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-starting-Eglot"></a>
<a class="index-entry-id" id="index-activating-Eglot-for-a-project"></a>

<a class="index-entry-id" id="index-eglot"></a>
<p>The most common way to start Eglot is to simply visit a source file of a
given language and use the command <kbd class="kbd">M-x eglot</kbd>.  This starts the
language server suitable for the visited file&rsquo;s major-mode, and attempts
to connect to it.  If the connection to the language server is
successful, you will see the <code class="code">[eglot:<var class="var">project</var>]</code> indicator on
the mode line which reflects the server that was started.  If the server
program couldn&rsquo;t be started or connection to it failed, you will see an
error message; in that case, try to troubleshoot the problem as
described in <a class="ref" href="#Troubleshooting-Eglot">Troubleshooting Eglot</a>.  Once a language server was
successfully started and Eglot connected to it, you can immediately
start using the Emacs features supported by Eglot, as described in
<a class="ref" href="#Eglot-Features">Eglot Features</a>.
</p>
<p>A single Eglot session for a certain major-mode usually serves all the
buffers under that mode which visit files from the same project, so you
don&rsquo;t need to invoke <kbd class="kbd">M-x eglot</kbd> again when you visit another file
from the same project which is edited using the same major-mode.  This
is because Eglot uses the Emacs project infrastructure, as described in
<a class="ref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>, and this knows about files that belong to the
same project.  Thus, after starting an Eglot session for some buffer,
that session is automatically reused when visiting files in the same
project with the same major-mode.
</p>
<a class="index-entry-id" id="index-eglot_002densure"></a>
<p>Alternatively, you could configure Eglot to start automatically for one
or more major-modes from the respective mode hooks.  Here&rsquo;s an example
for a hypothetical <code class="code">foo-mode</code>:
</p>
<div class="example lisp">
<pre class="lisp-preformatted"> (add-hook 'foo-mode-hook 'eglot-ensure)
</pre></div>

<p>The function <code class="code">eglot-ensure</code> will start an Eglot session for each
buffer in which <code class="code">foo-mode</code> is turned on, if there isn&rsquo;t already an
Eglot session that handles the buffer.  Note that this variant of
starting an Eglot session is non-interactive, so it should be used only
when you are confident that Eglot can be started reliably for any file
which may be visited with the major-mode in question.
</p>
<p>Note that it&rsquo;s often difficult to establish this confidence fully, so it
may be wise to use the interactive command <code class="code">eglot</code> instead.  You
only need to invoke it once per project, as all other files visited
within the same project will automatically be managed with no further
user intervention needed.
</p>
<p>When Eglot connects to a language server for the first time in an Emacs
session, it runs the hook <code class="code">eglot-connect-hook</code> (see <a class="pxref" href="#Other-Variables">Other Variables</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Shutting-Down-LSP-Servers">
<div class="nav-panel">
<p>
Previous: <a href="#Starting-Eglot" accesskey="p" rel="prev">Starting Eglot</a>, Up: <a href="#Eglot-and-LSP-Servers" accesskey="u" rel="up">Eglot and LSP Servers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Shutting-Down-LSP-Servers-1"><span>2.3 Shutting Down LSP Servers<a class="copiable-link" href="#Shutting-Down-LSP-Servers-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-shutting-down-LSP-server"></a>

<p>When Eglot is turned on, it arranges for turning itself off
automatically if the language server process terminates.  Turning off
Eglot means that it shuts down the server connection, ceases its
management of all the buffers that use the server connection which was
terminated, deactivates its minor mode, and restores the original values
of the Emacs variables that Eglot changed when it was turned on.
See <a class="xref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>, for more details of what Eglot management of a
buffer entails.
</p>
<a class="index-entry-id" id="index-eglot_002dshutdown"></a>
<p>You can also shut down a language server manually, by using the command
<kbd class="kbd">M-x eglot-shutdown</kbd>.  This prompts for the server (unless there&rsquo;s
only one connection and it&rsquo;s used in the current buffer), and then shuts
it down.  By default, it also kills the server&rsquo;s events buffer
(see <a class="pxref" href="#Troubleshooting-Eglot">Troubleshooting Eglot</a>), but a prefix argument prevents that.
</p>
<p>Alternatively, you can customize the variable <code class="code">eglot-autoshutdown</code>
to a non-<code class="code">nil</code> value, in which case Eglot will automatically shut
down the language server process when the last buffer served by that
language server is killed.  The default of this variable is <code class="code">nil</code>,
so that visiting another file would automatically activate Eglot even
when the project which started Eglot with the server no longer has any
buffer associated with it.  This default allows you to start a server
only once in each Emacs session.
</p>
<hr>
</div>
</div>
<div class="chapter-level-extent" id="Using-Eglot">
<div class="nav-panel">
<p>
Next: <a href="#Customizing-Eglot" accesskey="n" rel="next">Customizing Eglot</a>, Previous: <a href="#Eglot-and-LSP-Servers" accesskey="p" rel="prev">Eglot and LSP Servers</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Using-Eglot-1"><span>3 Using Eglot<a class="copiable-link" href="#Using-Eglot-1"> &para;</a></span></h2>

<p>This chapter describes in detail the features that Eglot provides and
how it does that.  It also provides reference sections for Eglot
commands and variables.
</p>

<ul class="mini-toc">
<li><a href="#Eglot-Features" accesskey="1">Eglot Features</a></li>
<li><a href="#Eglot-and-Buffers" accesskey="2">Buffers, Projects, and Eglot</a></li>
<li><a href="#Eglot-Commands" accesskey="3">Eglot Commands</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Eglot-Features">
<div class="nav-panel">
<p>
Next: <a href="#Eglot-and-Buffers" accesskey="n" rel="next">Buffers, Projects, and Eglot</a>, Up: <a href="#Using-Eglot" accesskey="u" rel="up">Using Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Eglot-Features-1"><span>3.1 Eglot Features<a class="copiable-link" href="#Eglot-Features-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-features-in-buffers-supported-by-Eglot"></a>

<p>While Eglot is enabled in a buffer, it is said to be <em class="dfn">managing</em> it,
using LSP and the specific capabilities of the language server to
activate and enhance modern IDE features in Emacs.  Some of these
features are provided via other Emacs packages, and some via Eglot
directly (see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).
</p>
<p>Here&rsquo;s an overview of the main features that Eglot provides:
</p>
<ul class="itemize mark-bullet">
<li>At-point documentation: when point is near a symbol or an identifier,
information about the identifier&rsquo;s significance in the program (its
function or method signature, its type, its custom documentation string,
etc.) is made available via the ElDoc package (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Programming-Language-Doc">Programming
Language Doc</a> in <cite class="cite">GNU Emacs Manual</cite>).

</li><li>On-the-fly diagnostic annotations, via the Flymake package
(see <cite class="cite"><a data-manual="Flymake" href="Flymake.html#Top">GNU Flymake manual</a></cite>).  Eglot&rsquo;s Flymake backend
replaces other Flymake backends while it is managing a buffer, and
enhances diagnostics with interactive server-suggested fixes (so-called
<em class="dfn">code actions</em>, see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).

</li><li>Finding definitions and uses of identifiers, via Xref (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Xref">Xref</a> in <cite class="cite">GNU Emacs Manual</cite>).  Eglot provides a backend for the Xref
capabilities which uses the language-server understanding of the program
source.  In particular, it eliminates the need to generate tags tables
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Tags-tables">Tags tables</a> in <cite class="cite">GNU Emacs Manual</cite>) for languages which are
only supported by the <code class="code">etags</code> backend.

</li><li>Buffer navigation by name of function, class, method, etc., via Imenu
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Imenu">Imenu</a> in <cite class="cite">GNU Emacs Manual</cite>).  Eglot provides its own
variant of <code class="code">imenu-create-index-function</code>, which generates the index
for the buffer based on language-server program source analysis.

</li><li>Enhanced completion of symbol at point by the <code class="code">completion-at-point</code>
command (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Symbol-Completion">Symbol Completion</a> in <cite class="cite">GNU Emacs Manual</cite>).  This
uses the language-server&rsquo;s parser data for the completion candidates.

</li><li>Server-suggested code refactorings.  The ElDoc package is also leveraged
to retrieve so-called <em class="dfn">code actions</em> nearby point.  When such
suggestions are available they are annotated with a special indication
and can be easily invoked by the user with the <code class="code">eglot-code-action</code>
command (see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).

</li><li>On-the-fly succinct informative annotations, so-called <em class="dfn">inlay
hints</em>.  Eglot adds special intangible text nearby certain identifiers,
be it the type of a variable, or the name of a formal parameter in a
function call.  See <a class="xref" href="#Eglot-Commands">Eglot Commands</a> and the
<code class="code">eglot-inlay-hints-mode</code> minor mode.

</li><li>Display of function call and type hierarchies via the
<code class="code">eglot-show-call-hierarchy</code> and <code class="code">eglot-show-type-hierarchy</code>
commands (see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).

</li><li>Code reformatting via the <code class="code">eglot-format</code> and related commands
(see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).  Automatic reformatting of source code is also
supported and is activated automatically as you type.

</li><li>If a completion package such as the Company package (a popular
third-party completion package providing <code class="code">company-mode</code>), is
installed, Eglot enhances it by providing completion candidates based on
the language-server analysis of the source code.  (Company can be
installed from GNU ELPA.)

</li><li>If YASnippet, a popular third-party package for automatic insertion of
code templates (snippets), is installed, and the language server
supports snippet completion candidates, Eglot arranges for the
completion package to instantiate these snippets using YASnippet.
(YASnippet can be installed from GNU ELPA.)

</li><li>If the popular third-party package <code class="code">markdown-mode</code> is installed,
and the server provides at-point documentation formatted as Markdown in
addition to plain text, Eglot arranges for the ElDoc package to enrich
this text with fontifications and other nice formatting before
displaying it to the user.  This makes the documentation shown by ElDoc
look nicer on display.

</li><li>In addition to enabling and enhancing other features and packages, Eglot
also provides a number of user commands based on the capabilities of
language servers.  Examples include renaming symbols with
<kbd class="kbd">eglot-rename</kbd> and asking to automatically correct problems with
<kbd class="kbd">eglot-code-actions</kbd>.  See <a class="xref" href="#Eglot-Commands">Eglot Commands</a>.
</li></ul>

<p>Not all servers support the full set of LSP capabilities, but most of
them support enough to enable the basic set of features mentioned above.
</p>
<p>Conversely, some servers offer capabilities for which no equivalent
Emacs package exists yet, and so Eglot cannot (yet) expose these
capabilities to Emacs users.  However, See <a class="xref" href="#Extending-Eglot">Extending Eglot</a>.
</p>
<p>Finally, it&rsquo;s worth noting that, by default, Eglot generally turns on
all features that it <em class="emph">can</em> turn on.  It&rsquo;s possible to opt out of
some features via user options (see <a class="pxref" href="#Customizing-Eglot">Customizing Eglot</a>) and a hook
that runs after Eglot starts managing a buffer (see <a class="pxref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Eglot-and-Buffers">
<div class="nav-panel">
<p>
Next: <a href="#Eglot-Commands" accesskey="n" rel="next">Eglot Commands</a>, Previous: <a href="#Eglot-Features" accesskey="p" rel="prev">Eglot Features</a>, Up: <a href="#Using-Eglot" accesskey="u" rel="up">Using Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Buffers_002c-Projects_002c-and-Eglot"><span>3.2 Buffers, Projects, and Eglot<a class="copiable-link" href="#Buffers_002c-Projects_002c-and-Eglot"> &para;</a></span></h3>
<a class="index-entry-id" id="index-buffers-managed-by-Eglot"></a>
<a class="index-entry-id" id="index-projects-and-Eglot"></a>

<a class="index-entry-id" id="index-workspace"></a>
<p>One of the main strong points of using a language server is that a
language server has a broad view of the program: it considers more than
just the single source file you are editing.  Ideally, the language
server should know about all the source files of your program which are
written in the language supported by the server.  In the language-server
parlance, the set of the source files of a program is known as a
<em class="dfn">workspace</em>.  The Emacs equivalent of a workspace is a <em class="dfn">project</em>
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Projects">Projects</a> in <cite class="cite">GNU Emacs Manual</cite>).  Eglot fully supports
Emacs projects, and considers the file in whose buffer Eglot is turned
on as belonging to a project.  In the simplest case, that file is the
entire project, i.e. your project consists of a single file.  But
there are other more complex projects:
</p>
<ul class="itemize mark-bullet">
<li>A single-directory project: several source files in a single common
directory.

</li><li>A VC project: source files in a directory hierarchy under some VCS,
e.g. a VCS repository (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Version-Control">Version Control</a> in <cite class="cite">GNU Emacs
Manual</cite>).

</li><li>An EDE project: source files in a directory hierarchy managed via the
Emacs Development Environment (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#EDE">EDE</a> in <cite class="cite">GNU Emacs
Manual</cite>).
</li></ul>

<p>Eglot uses Emacs&rsquo;s project management infrastructure to figure out which
files and buffers belong to what project, so any kind of project
supported by that infrastructure is automatically supported by Eglot.
</p>
<p>When Eglot starts a server program, it does so in the project&rsquo;s root
directory, which is usually the top-level directory of the project&rsquo;s
directory hierarchy.  This ensures the language server has the same
comprehensive view of the project&rsquo;s files as you do.
</p>
<p>For example, if you visit the file <samp class="file">~/projects/fooey/lib/x.foo</samp> and
<samp class="file">x.foo</samp> belongs to a project rooted at <samp class="file">~/projects/fooey</samp>
(perhaps because a <samp class="file">.git</samp> directory exists there), then <kbd class="kbd">M-x
eglot</kbd> causes the server program to start with that root as the current
working directory.  The server then will analyze not only the file
<samp class="file">lib/x.foo</samp> you visited, but likely also all the other <samp class="file">*.foo</samp>
files under the <samp class="file">~/projects/fooey</samp> directory.
</p>
<p>In some cases, additional information specific to a given project will
need to be provided to the language server when starting it.  The
variable <code class="code">eglot-workspace-configuration</code> (see <a class="pxref" href="#Customizing-Eglot">Customizing Eglot</a>) exists for that purpose.  It specifies the parameters and their
values to communicate to each language server which needs that.
</p>
<p>When Eglot is active for a project, the project&rsquo;s buffers are treated
specially in several ways:
</p>
<ul class="itemize mark-bullet">
<li><a class="index-entry-id" id="index-mode_002dline-indication-of-language-server"></a>
<a class="index-entry-id" id="index-mouse-clicks-on-mode_002dline_002c-and-Eglot"></a>
<a class="index-entry-id" id="index-eglot_002dmenu"></a>
All of the project&rsquo;s file-visiting buffers under the same major-mode are
served by a single language-server connection.  (If the project uses
several programming languages, there will usually be a separate server
connection for each group of files written in the same language and
using the same Emacs major-mode.)  Eglot adds the
&lsquo;<samp class="samp">[eglot:<var class="var">project</var>]</samp>&rsquo; indication to the mode line of each such
buffer, where <var class="var">server</var> is the name of the server and <var class="var">project</var>
identifies the project by its root directory.  Clicking the mouse on the
Eglot mode-line indication activates a menu with server-specific items.
The layout of the Eglot mode-line can be changed by customizing
<code class="code">eglot-mode-line-format</code> (see <a class="pxref" href="#Customization-Variables">Customization Variables</a>).

</li><li>For each buffer in which Eglot is active, it notifies the language
server that Eglot is <em class="dfn">managing</em> the file visited by that buffer.
This tells the language server that the file&rsquo;s contents on disk may no
longer be up-to-date due to unsaved edits.  Eglot reports to the server
any changes in the text of each managed buffer, to make the server aware
of unsaved changes.  This includes your editing of the buffer and also
changes done automatically by other Emacs features and commands.
Killing a buffer relinquishes its management by Eglot and notifies the
server that the file on disk is up-to-date.

</li><li>When you visit a file under the same project, whether an existing or a
new file, its buffer is automatically added to the set of buffers
managed by Eglot, and the server which supports the buffer&rsquo;s major-mode
is notified about that.  Thus, visiting a non-existent file
<samp class="file">/home/joe/projects/fooey/lib/y.foo</samp> in the above example will
notify the server of the <samp class="file">*.foo</samp> files&rsquo; language that a new file
was added to the project, even before the file appears on disk.  The
special Eglot minor mode is also turned on automatically in the buffer
visiting the file.

</li><li>Eglot turns on a special minor mode in each buffer it manages.  This
minor mode ensures the server is notified about files Eglot manages.
Unlike other minor-modes, this special minor mode is <em class="emph">not</em>
activated manually by the user, but automatically, as the result of
starting an Eglot session for the buffer.  When Eglot stops managing the
buffer, the minor mode is turned off, and all the settings that Eglot
changed are restored to their original values.

</li><li><a class="index-entry-id" id="index-eglot_002dmanaged_002dmode_002dhook"></a>
<a class="index-entry-id" id="index-eglot_002dmanaged_002dp"></a>
The minor mode&rsquo;s main job is to &ldquo;hook up&rdquo; Eglot to other Emacs
functionality, i.e.  arrange for these features to receive information
from the language server, by changing special variables controlling
these features.  See <a class="xref" href="#Eglot-Features">Eglot Features</a>.

</li><li>To customize this, Eglot&rsquo;s special minor mode provides a hook variable
<code class="code">eglot-managed-mode-hook</code> specifically to alter Eglot&rsquo;s interaction
with these variables in each buffer.  This hook is run both when the
minor mode is turned on and when it&rsquo;s turned off; use the function
<code class="code">eglot-managed-p</code> to tell if current buffer is still being managed
or not.
</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Eglot-Commands">
<div class="nav-panel">
<p>
Previous: <a href="#Eglot-and-Buffers" accesskey="p" rel="prev">Buffers, Projects, and Eglot</a>, Up: <a href="#Using-Eglot" accesskey="u" rel="up">Using Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Eglot-Commands-1"><span>3.3 Eglot Commands<a class="copiable-link" href="#Eglot-Commands-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-commands_002c-Eglot"></a>

<p>This section provides a reference for the most commonly used Eglot
commands:
</p>
<dl class="ftable">
<dt><a id="index-M_002dx-eglot"></a><span><code class="code">M-x eglot</code><a class="copiable-link" href="#index-M_002dx-eglot"> &para;</a></span></dt>
<dd><p>This command adds the current buffer and the file it visits to the group
of buffers and files managed by Eglot on behalf of a suitable language
server.  If a language server for the buffer&rsquo;s <code class="code">major-mode</code>
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Major-Modes">Major Modes</a> in <cite class="cite">GNU Emacs Manual</cite>) is not yet running, it
will be started; otherwise the buffer and its file will be added to
those managed by an existing server session.
</p>
<p>The command attempts to figure out the buffer&rsquo;s major mode and the
suitable language server; in case it fails, it might prompt for the
major mode to use and for the server program to start.  If invoked with
<kbd class="kbd">C-u</kbd>, it always prompts for the server program, and if invoked with
<kbd class="kbd">C-u C-u</kbd>, it also prompts for the major mode.
</p>
<p>If the language server is successfully started and contacted, this
command arranges for any other buffers belonging to the same project and
using the same major mode to use the same language-server session.  That
includes any buffers created by visiting files after this command
succeeds to connect to a language server.
</p>
<p>All the Emacs features that are capable of using Eglot services
(see <a class="pxref" href="#Eglot-Features">Eglot Features</a>) are automatically configured by this command to
start using the language server via Eglot.  To customize which Emacs
features will be configured to use Eglot, use the
<code class="code">eglot-stay-out-of</code> option (see <a class="pxref" href="#Customizing-Eglot">Customizing Eglot</a>).
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dreconnect"></a><span><code class="code">M-x eglot-reconnect</code><a class="copiable-link" href="#index-M_002dx-eglot_002dreconnect"> &para;</a></span></dt>
<dd><p>This command shuts down the current connection to the language server
and immediately restarts it using the same options used originally.
This can sometimes be useful to unclog a partially malfunctioning server
connection.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dshutdown"></a><span><code class="code">M-x eglot-shutdown</code><a class="copiable-link" href="#index-M_002dx-eglot_002dshutdown"> &para;</a></span></dt>
<dd><p>This command shuts down a language server.  It prompts for a language
server to shut down (unless there&rsquo;s only one server session, and it
manages the current buffer).  Then the command shuts down the server and
stops managing the buffers the server was used for.  Emacs features
(see <a class="pxref" href="#Eglot-Features">Eglot Features</a>) that Eglot configured to work with the language
server are restored back to their original configuration.
</p>
<p>Normally, this command kills the buffers used for communicating with the
language server, but if invoked with a prefix argument <kbd class="kbd">C-u</kbd>, the
command doesn&rsquo;t kill those buffers, allowing them to be used for
diagnostics and problem reporting (see <a class="pxref" href="#Troubleshooting-Eglot">Troubleshooting Eglot</a>).
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dshutdown_002dall"></a><span><code class="code">M-x eglot-shutdown-all</code><a class="copiable-link" href="#index-M_002dx-eglot_002dshutdown_002dall"> &para;</a></span></dt>
<dd><p>This command shuts down all the language servers active in the current
Emacs session.  As with <code class="code">eglot-shutdown</code>, invoking this command
with a prefix argument avoids killing the buffers used for
communications with the language servers.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002drename"></a><span><code class="code">M-x eglot-rename</code><a class="copiable-link" href="#index-M_002dx-eglot_002drename"> &para;</a></span></dt>
<dd><p>This command renames the program symbol (a.k.a. <em class="dfn">identifier</em>) at
point to another name.  It prompts for the new name of the symbol, and
then modifies all the files in the project which are managed by the
language server of the current buffer to implement the renaming.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dformat"></a><span><code class="code">M-x eglot-format</code><a class="copiable-link" href="#index-M_002dx-eglot_002dformat"> &para;</a></span></dt>
<dd><p>This command reformats the active region according to the
language-server rules.  If no region is active, it reformats the entire
current buffer.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dformat_002dbuffer"></a><span><code class="code">M-x eglot-format-buffer</code><a class="copiable-link" href="#index-M_002dx-eglot_002dformat_002dbuffer"> &para;</a></span></dt>
<dd><p>This command reformats the current buffer, in the same manner as
<code class="code">eglot-format</code> does.
</p>
</dd>
<dt><a class="index-entry-id" id="index-code-actions"></a>
<a id="index-M_002dx-eglot_002dcode_002dactions"></a><span><code class="code">M-x eglot-code-actions</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002dactions"> &para;</a></span></dt>
<dt><a id="index-M_002dx-eglot_002dcode_002daction_002dorganize_002dimports"></a><span><code class="code">M-x eglot-code-action-organize-imports</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002daction_002dorganize_002dimports"> &para;</a></span></dt>
<dt><a id="index-M_002dx-eglot_002dcode_002daction_002dquickfix"></a><span><code class="code">M-x eglot-code-action-quickfix</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002daction_002dquickfix"> &para;</a></span></dt>
<dt><a id="index-M_002dx-eglot_002dcode_002daction_002dextract"></a><span><code class="code">M-x eglot-code-action-extract</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002daction_002dextract"> &para;</a></span></dt>
<dt><a id="index-M_002dx-eglot_002dcode_002daction_002dinline"></a><span><code class="code">M-x eglot-code-action-inline</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002daction_002dinline"> &para;</a></span></dt>
<dt><a id="index-M_002dx-eglot_002dcode_002daction_002drewrite"></a><span><code class="code">M-x eglot-code-action-rewrite</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcode_002daction_002drewrite"> &para;</a></span></dt>
<dd><p>These commands allow you to invoke the so-called <em class="dfn">code actions</em>:
requests for the language server to provide editing commands for
correcting, refactoring or beautifying your code.  These commands may
affect more than one visited file belonging to the project.
</p>
<p>The command <code class="code">eglot-code-actions</code> asks the server if there are any
code actions for any point in the buffer or contained in the active
region.  If there are, you have the choice to execute one of them via
the minibuffer.
</p>
<p>A common use of code actions is fixing the Flymake error diagnostics
issued by Eglot (see <cite class="cite"><a data-manual="Flymake" href="Flymake.html#Top">GNU Flymake manual</a></cite>).  Clicking
on a diagnostic with <kbd class="kbd">mouse-2</kbd> invokes
<code class="code">eglot-code-actions-at-mouse</code> which pops up a menu of available
code actions.  The variable <code class="code">eglot-diagnostics-map</code> can be used to
control the mouse binding.
</p>
<p>Other commands execute a specific code action.  For example,
<code class="code">eglot-code-action-organize-imports</code> rearranges the program&rsquo;s
<em class="dfn">imports</em>&mdash;declarations of modules whose capabilities the program
uses.
</p>
</dd>
<dt><a class="index-entry-id" id="index-inlay-hints"></a>
<a id="index-M_002dx-eglot_002dinlay_002dhints_002dmode"></a><span><code class="code">M-x eglot-inlay-hints-mode</code><a class="copiable-link" href="#index-M_002dx-eglot_002dinlay_002dhints_002dmode"> &para;</a></span></dt>
<dd><p>This command toggles LSP <em class="dfn">inlay hints</em> on and off for the current
buffer.  Inlay hints are small text annotations to specific parts of the
whole buffer, not unlike diagnostics, but designed to help readability
instead of indicating problems.  For example, a C++ language server can
serve hints about positional parameter names in function calls and a
variable&rsquo;s automatically deduced type.  Inlay hints help the user not
have to remember these things by heart.
</p>
</dd>
<dt><a class="index-entry-id" id="index-type-hierarchy"></a>
<a id="index-M_002dx-eglot_002dshow_002dtype_002dhierarchy"></a><span><code class="code">M-x eglot-show-type-hierarchy</code><a class="copiable-link" href="#index-M_002dx-eglot_002dshow_002dtype_002dhierarchy"> &para;</a></span></dt>
<dd><p>Pop up a special buffer showing a interactive tree which represents a
hierarchy of subtypes and supertypes for the symbol at point.
</p>
</dd>
<dt><a class="index-entry-id" id="index-call-hierarchy"></a>
<a id="index-M_002dx-eglot_002dcall_002dtype_002dhierarchy"></a><span><code class="code">M-x eglot-call-type-hierarchy</code><a class="copiable-link" href="#index-M_002dx-eglot_002dcall_002dtype_002dhierarchy"> &para;</a></span></dt>
<dd><p>Pop up a special buffer showing a interactive tree which represents a
hierarchy of callers and callee for the symbol at point.
</p></dd>
</dl>

<p>The following Eglot commands are used less commonly, mostly for
diagnostic and troubleshooting purposes:
</p>
<dl class="ftable">
<dt><a id="index-M_002dx-eglot_002devents_002dbuffer"></a><span><code class="code">M-x eglot-events-buffer</code><a class="copiable-link" href="#index-M_002dx-eglot_002devents_002dbuffer"> &para;</a></span></dt>
<dd><p>This command pops up the events buffer used for communication with the
language server of the current buffer.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dstderr_002dbuffer"></a><span><code class="code">M-x eglot-stderr-buffer</code><a class="copiable-link" href="#index-M_002dx-eglot_002dstderr_002dbuffer"> &para;</a></span></dt>
<dd><p>This command pops up the buffer with the debug info printed by the
language server to its standard error stream.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dforget_002dpending_002dcontinuations"></a><span><code class="code">M-x eglot-forget-pending-continuations</code><a class="copiable-link" href="#index-M_002dx-eglot_002dforget_002dpending_002dcontinuations"> &para;</a></span></dt>
<dd><p>Forget pending requests for the server of the current buffer.
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dsignal_002ddidChangeConfiguration"></a><span><code class="code">M-x eglot-signal-didChangeConfiguration</code><a class="copiable-link" href="#index-M_002dx-eglot_002dsignal_002ddidChangeConfiguration"> &para;</a></span></dt>
<dd><p>This command updates the language server configuration according to the
current value of the variable <code class="code">eglot-workspace-configuration</code>
(see <a class="pxref" href="#Customizing-Eglot">Customizing Eglot</a>).
</p>
</dd>
<dt><a id="index-M_002dx-eglot_002dclear_002dstatus"></a><span><code class="code">M-x eglot-clear-status</code><a class="copiable-link" href="#index-M_002dx-eglot_002dclear_002dstatus"> &para;</a></span></dt>
<dd><p>Clear the last JSONRPC error for the server of the current buffer.
Eglot keeps track of erroneous situations encountered by the server in
its mode-line indication so that the user may inspect the communication
leading up to it (see <a class="pxref" href="#Troubleshooting-Eglot">Troubleshooting Eglot</a>).  If the situation is
deemed uninteresting or temporary, this command can be used to
&ldquo;forget&rdquo; the error.  Note that the command <code class="code">M-x eglot-reconnect</code>
can sometimes be used to unclog a temporarily malfunctioning server.
</p></dd>
</dl>

<p>As described in <a class="ref" href="#Eglot-Features">Eglot Features</a> most features associated with Eglot
are actually provided by other Emacs packages and features, and Eglot
only enhances them by allowing them to use the information coming from
the language servers.  For completeness, here&rsquo;s the list of commands of
those other packages that are very commonly used in Eglot-managed
buffers:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-documentation-using-Eglot"></a>
<a id="index-ElDoc_002c-and-Eglot"></a><span><code class="code">M-x eldoc</code><a class="copiable-link" href="#index-ElDoc_002c-and-Eglot"> &para;</a></span></dt>
<dd><p>Ask the ElDoc system for help at point.
</p>
</dd>
<dt><a class="index-entry-id" id="index-on_002dthe_002dfly-diagnostics-using-Eglot"></a>
<a id="index-Flymake_002c-and-Eglot"></a><span><code class="code">M-x flymake-show-buffer-diagnostics</code><a class="copiable-link" href="#index-Flymake_002c-and-Eglot"> &para;</a></span></dt>
<dd><p>Ask Flymake system to display diagnostics for the current buffer.
</p>
</dd>
<dt><code class="code">M-x flymake-show-project-diagnostics</code></dt>
<dd><p>Ask Flymake to list diagnostics for all the files in the current
project.
</p>
</dd>
<dt><a class="index-entry-id" id="index-finding-definitions-of-identifiers-using-Eglot"></a>
<a id="index-xref_002c-and-Eglot"></a><span><code class="code">M-x xref-find-definitions</code><a class="copiable-link" href="#index-xref_002c-and-Eglot"> &para;</a></span></dt>
<dd><p>Ask Xref to go the definition of the identifier at point.
</p>
</dd>
<dt><a id="index-imenu-navigation-using-Eglot"></a><span><code class="code">M-x imenu</code><a class="copiable-link" href="#index-imenu-navigation-using-Eglot"> &para;</a></span></dt>
<dd><p>Let the user navigate the program source code using buffer index,
categorizing program elements by syntactic class (class, method,
variable, etc.) and offering completion.
</p>
</dd>
<dt><a id="index-symbol-completion-using-Eglot"></a><span><code class="code">M-x completion-at-point</code><a class="copiable-link" href="#index-symbol-completion-using-Eglot"> &para;</a></span></dt>
<dd><p>Request completion of the symbol at point.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Customizing-Eglot">
<div class="nav-panel">
<p>
Next: <a href="#Advanced-server-configuration" accesskey="n" rel="next">Advanced server configuration</a>, Previous: <a href="#Using-Eglot" accesskey="p" rel="prev">Using Eglot</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Customizing-Eglot-1"><span>4 Customizing Eglot<a class="copiable-link" href="#Customizing-Eglot-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-customizing-Eglot"></a>

<p>To have Eglot behave like you want it, sometimes it suffices to
customize Emacs packages and features that Eglot uses but to do so for
all of Emacs (regardless of Eglot) .  For example, to configure the
amount of space taken up by documentation in the echo area, customize
the ElDoc variable <code class="code">eldoc-echo-area-use-multiline-p</code>.  To configure
Flymake faces used for errors and warnings, customize the
<code class="code">flymake-error</code> and <code class="code">flymake-warning</code> faces.
</p>
<p>Compared to the breadth of its functionality, Eglot itself has a
relatively small number of customization variables.  There is
additionally a set of variables that are usually set from Elisp snippets
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Init-File">Init File</a> in <cite class="cite">The GNU Emacs Manual</cite>).
</p>
<p>Other times, it&rsquo;s necessary to have finer control of Eglot&rsquo;s interaction
with these features.  See <a class="xref" href="#More-Customization">More Customization</a>.
</p>

<ul class="mini-toc">
<li><a href="#Customization-Variables" accesskey="1">Customization Variables</a></li>
<li><a href="#Other-Variables" accesskey="2">Other Variables</a></li>
<li><a href="#More-Customization" accesskey="3">More Customization</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Customization-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Other-Variables" accesskey="n" rel="next">Other Variables</a>, Up: <a href="#Customizing-Eglot" accesskey="u" rel="up">Customizing Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Customization-Variables-1"><span>4.1 Customization Variables<a class="copiable-link" href="#Customization-Variables-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-variables_002c-Eglot"></a>

<p>This section provides a reference for the Eglot user options.
</p>
<dl class="vtable">
<dt><a id="index-eglot_002dautoreconnect"></a><span><code class="code">eglot-autoreconnect</code><a class="copiable-link" href="#index-eglot_002dautoreconnect"> &para;</a></span></dt>
<dd><p>This option controls the ability to reconnect automatically to the
language server when Eglot detects that the server process terminated
unexpectedly.  The default value <code class="code">3</code> means to attempt reconnection
only if the previous successful connection lasted for more than that
number of seconds; a different positive value changes the minimal length
of the connection to trigger reconnection.  A value of <code class="code">t</code> means
always reconnect automatically, and <code class="code">nil</code> means never reconnect (in
which case you will need to reconnect manually using <kbd class="kbd">M-x eglot</kbd>).
</p>
</dd>
<dt><a id="index-eglot_002dconnect_002dtimeout"></a><span><code class="code">eglot-connect-timeout</code><a class="copiable-link" href="#index-eglot_002dconnect_002dtimeout"> &para;</a></span></dt>
<dd><p>This specifies the number of seconds before connection attempt to a
language server times out.  The value of <code class="code">nil</code> means never time
out.  The default is 30 seconds.
</p>
</dd>
<dt><a id="index-eglot_002dsync_002dconnect"></a><span><code class="code">eglot-sync-connect</code><a class="copiable-link" href="#index-eglot_002dsync_002dconnect"> &para;</a></span></dt>
<dd><p>This setting is mainly important for connections which are slow to
establish.  Whereas the variable <code class="code">eglot-connect-timeout</code> controls
how long to wait for, this variable controls whether to block Emacs&rsquo;s
user interface while waiting.  The default value is <code class="code">3</code>; a positive
value means block for that many seconds, then wait for the connection in
the background.  The value of <code class="code">t</code> means block during the whole
waiting period.  The value of <code class="code">nil</code> or <code class="code">0</code> means don&rsquo;t block
at all during the waiting period.
</p>
</dd>
<dt><a id="index-eglot_002devents_002dbuffer_002dconfig"></a><span><code class="code">eglot-events-buffer-config</code><a class="copiable-link" href="#index-eglot_002devents_002dbuffer_002dconfig"> &para;</a></span></dt>
<dd><p>This configures the size and format of the Eglot events buffer.
See <a class="xref" href="#Eglot-Commands">eglot-events-buffer</a>, for how to access that
buffer.  If the value is changed, the connection should be restarted
using <kbd class="kbd">M-x eglot-reconnect</kbd> for the new value to take effect.
See <a class="xref" href="#Troubleshooting-Eglot">Troubleshooting Eglot</a>, for when this could be useful.
</p>
</dd>
<dt><a id="index-eglot_002dautoshutdown"></a><span><code class="code">eglot-autoshutdown</code><a class="copiable-link" href="#index-eglot_002dautoshutdown"> &para;</a></span></dt>
<dd><p>If this is non-<code class="code">nil</code>, Eglot shuts down a language server when the
last buffer managed by it is killed.  See <a class="xref" href="#Shutting-Down-LSP-Servers">Shutting Down LSP Servers</a>.
The default is <code class="code">nil</code>; if you want to shut down a server, use
<kbd class="kbd">M-x eglot-shutdown</kbd> (see <a class="pxref" href="#Eglot-Commands">Eglot Commands</a>).
</p>
</dd>
<dt><a id="index-eglot_002dconfirm_002dserver_002dedits"></a><span><code class="code">eglot-confirm-server-edits</code><a class="copiable-link" href="#index-eglot_002dconfirm_002dserver_002dedits"> &para;</a></span></dt>
<dd><p>Various Eglot commands and code actions result in the language server
sending editing commands to Emacs.  If this option&rsquo;s value is
non-<code class="code">nil</code>, Eglot will ask for confirmation before performing edits
proposed by the language server.  This option&rsquo;s value can be crafted to
require this confirmation for specific commands or only when the edit
affects files not yet visited by the user.  Consult this option&rsquo;s
docstring for more information.
</p>
</dd>
<dt><a id="index-eglot_002dignored_002dserver_002dcapabilities"></a><span><code class="code">eglot-ignored-server-capabilities</code><a class="copiable-link" href="#index-eglot_002dignored_002dserver_002dcapabilities"> &para;</a></span></dt>
<dd><p>This variable&rsquo;s value is a list of language server capabilities that
Eglot should not use.  The default is <code class="code">nil</code>: Eglot uses all of the
capabilities supported by each server.
</p>
</dd>
<dt><a id="index-eglot_002dextend_002dto_002dxref"></a><span><code class="code">eglot-extend-to-xref</code><a class="copiable-link" href="#index-eglot_002dextend_002dto_002dxref"> &para;</a></span></dt>
<dd><p>If this is non-<code class="code">nil</code>, and <kbd class="kbd">M-.</kbd> (<code class="code">xref-find-definitions</code>)
lands you in a file outside of your project, such as a system-installed
library or header file, transiently consider that file as managed by the
same language server.  That file is still outside your project
(i.e. <code class="code">project-find-file</code> won&rsquo;t find it), but Eglot and the server
will consider it to be part of the workspace.  The default is
<code class="code">nil</code>.
</p>
</dd>
<dt><a id="index-eglot_002dmode_002dmap"></a><span><code class="code">eglot-mode-map</code><a class="copiable-link" href="#index-eglot_002dmode_002dmap"> &para;</a></span></dt>
<dd><p>This variable is the keymap for binding Eglot-related command.  It is in
effect only as long as the buffer is managed by Eglot.  By default, it
is empty, with the single exception: <kbd class="kbd">C-h .</kbd> is remapped to invoke
<code class="code">eldoc-doc-buffer</code>.  You can bind additional commands in this map.
For example:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">  (define-key eglot-mode-map (kbd &quot;C-c r&quot;) 'eglot-rename)
  (define-key eglot-mode-map (kbd &quot;C-c o&quot;) 'eglot-code-action-organize-imports)
  (define-key eglot-mode-map (kbd &quot;C-c h&quot;) 'eldoc)
  (define-key eglot-mode-map (kbd &quot;&lt;f6&gt;&quot;) 'xref-find-definitions)
</pre></div>

</dd>
<dt><a class="index-entry-id" id="index-progress"></a>
<a id="index-eglot_002dreport_002dprogress"></a><span><code class="code">eglot-report-progress</code><a class="copiable-link" href="#index-eglot_002dreport_002dprogress"> &para;</a></span></dt>
<dd><p>Set this variable to non-nil if you&rsquo;d like progress notifications coming
from the language server to be handled by Emacs&rsquo;s progress reporting
facilities.  If the value is the symbol <code class="code">messages</code> the message
buffer is used, else the progress is reported in the mode line.
</p>
</dd>
<dt><a class="index-entry-id" id="index-request-cancellation"></a>
<a id="index-eglot_002dadvertise_002dcancellation"></a><span><code class="code">eglot-advertise-cancellation</code><a class="copiable-link" href="#index-eglot_002dadvertise_002dcancellation"> &para;</a></span></dt>
<dd><p>Setting this variable to true causes Eglot to send special cancellation
notification for certain stale client request.  This may help some LSP
servers avoid doing costly but ultimately useless work on behalf of the
client, improving overall performance.
</p>
</dd>
<dt><a id="index-eglot_002dcode_002daction_002dindications"></a><span><code class="code">eglot-code-action-indications</code><a class="copiable-link" href="#index-eglot_002dcode_002daction_002dindications"> &para;</a></span></dt>
<dd><p>This variable controls the indication of code actions available at
point.  Value is a list of symbols, more than one can be specified:
</p>
<ul class="itemize mark-minus">
<li><code class="code">eldoc-hint</code>: ElDoc is used to hint about at-point actions.
</li><li><code class="code">margin</code>: A special indicator appears in the margin of the line
that point is currently on.
</li><li><code class="code">nearby</code>: An interactive special indicator appears near point.
</li><li><code class="code">mode-line</code>: An interactive special indicator appears in the mode
line.
</li></ul>

<p><code class="code">margin</code> and <code class="code">nearby</code> are incompatible.  If the list is empty,
ElDoc will not hint about at-point actions.
</p>
</dd>
<dt><a id="index-eglot_002dcode_002daction_002dindicator"></a><span><code class="code">eglot-code-action-indicator</code><a class="copiable-link" href="#index-eglot_002dcode_002daction_002dindicator"> &para;</a></span></dt>
<dd><p>This variable is a string determining what the special indicator looks
like.
</p>
</dd>
<dt><a id="index-eglot_002dmode_002dline_002dformat"></a><span><code class="code">eglot-mode-line-format</code><a class="copiable-link" href="#index-eglot_002dmode_002dline_002dformat"> &para;</a></span></dt>
<dd><p>This variables controls the shape and look of Eglot&rsquo;s mode line.  Its
value is a mode line &ldquo;construct&rdquo;, generally a list of symbols and
strings.  The following symbols are meaningful and useful for Eglot&rsquo;s
mode line:
</p><ul class="itemize mark-minus">
<li><code class="code">eglot-mode-line-menu</code>: access Eglot&rsquo;s main menu.  See also
<code class="code">eglot-menu-string</code>;
</li><li><code class="code">eglot-mode-line-session</code>: indicate current project and access
current session&rsquo;s menu;
</li><li><code class="code">eglot-mode-line-error</code>: an indication of recent LSP errors;
</li><li><code class="code">eglot-mode-line-pending-requests</code>: number of pending LSP requests;
</li><li><code class="code">eglot-mode-line-progress</code>: progress reporter widgets;
</li><li><code class="code">eglot-mode-line-action-suggestion</code>: LSP code actions at point.
</li></ul>
</dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="Other-Variables">
<div class="nav-panel">
<p>
Next: <a href="#More-Customization" accesskey="n" rel="next">More Customization</a>, Previous: <a href="#Customization-Variables" accesskey="p" rel="prev">Customization Variables</a>, Up: <a href="#Customizing-Eglot" accesskey="u" rel="up">Customizing Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Other-Variables-1"><span>4.2 Other Variables<a class="copiable-link" href="#Other-Variables-1"> &para;</a></span></h3>

<p>This section provides a reference for Eglot variables that are meant to
be changed from Elisp snippets.
</p>
<dl class="table">
<dt><code class="code">eglot-server-programs</code></dt>
<dd><p>This variable determines which language server to start for each
supported major mode, and how to invoke that server&rsquo;s program.
See <a class="xref" href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a>, for the details.
</p>
</dd>
<dt><a id="index-eglot_002dstrict_002dmode"></a><span><code class="code">eglot-strict-mode</code><a class="copiable-link" href="#index-eglot_002dstrict_002dmode"> &para;</a></span></dt>
<dd><p>This is <code class="code">nil</code> by default, meaning that Eglot is generally lenient
about non-conforming servers.  If you need to debug a server, set this
to <code class="code">(disallow-non-standard-keys&nbsp;enforce-required-keys)</code><!-- /@w -->.
</p>
</dd>
<dt><a id="index-eglot_002dserver_002dinitialized_002dhook"></a><span><code class="code">eglot-server-initialized-hook</code><a class="copiable-link" href="#index-eglot_002dserver_002dinitialized_002dhook"> &para;</a></span></dt>
<dd><p>A hook run after the server object is successfully initialized (which
includes launching the process) but before any LSP communication is
attempted.  Each function receives a <code class="code">eglot-lsp-server</code> instance as
argument.
</p>
</dd>
<dt><a id="index-eglot_002dconnect_002dhook"></a><span><code class="code">eglot-connect-hook</code><a class="copiable-link" href="#index-eglot_002dconnect_002dhook"> &para;</a></span></dt>
<dd><p>A hook run after the LSP connection to the server is successfully
established.  Each function receives a <code class="code">eglot-lsp-server</code> instance
as argument.  See <a class="xref" href="#Starting-Eglot">Starting Eglot</a>.
</p>
</dd>
<dt><code class="code">eglot-managed-mode-hook</code></dt>
<dd><p>A hook run after Eglot started or stopped managing a buffer.
See <a class="xref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>, for details of its usage.
</p>
</dd>
<dt><a id="index-eglot_002dstay_002dout_002dof"></a><span><code class="code">eglot-stay-out-of</code><a class="copiable-link" href="#index-eglot_002dstay_002dout_002dof"> &para;</a></span></dt>
<dd><p>This variable&rsquo;s value lists Emacs features that Eglot shouldn&rsquo;t
automatically try to manage on the user&rsquo;s behalf.  It is useful, for
example, when you need to use non-LSP Flymake or Company back-ends.  To
have Eglot stay away from some Emacs feature, add that feature&rsquo;s symbol
or a regexp that will match a symbol&rsquo;s name to the list: for example,
the symbol <code class="code">xref</code> to leave Xref alone, or the string &lsquo;<samp class="samp">company</samp>&rsquo;
to stay away from your Company customizations.  Here&rsquo;s an example:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(add-to-list 'eglot-stay-out-of 'flymake)
</pre></div>

<p>Note that you can still configure the excluded Emacs features manually
to use Eglot in your <code class="code">eglot-managed-mode-hook</code> or via some other
mechanism.
</p></dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="More-Customization">
<div class="nav-panel">
<p>
Previous: <a href="#Other-Variables" accesskey="p" rel="prev">Other Variables</a>, Up: <a href="#Customizing-Eglot" accesskey="u" rel="up">Customizing Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="More-Customization-1"><span>4.3 More Customization<a class="copiable-link" href="#More-Customization-1"> &para;</a></span></h3>

<p>As explained earlier (see <a class="pxref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>), Eglot hooks onto
existing Emacs packages and features by setting special variables in its
special minor mode.  To gain finer control of Eglot&rsquo;s operation, the
<code class="code">eglot-managed-mode-hook</code> should be used to tweak, subdue or
completely override Eglot&rsquo;s setting of these variables.
</p>
<ul class="itemize mark-bullet">
<li>Eglot hooks onto ElDoc&rsquo;s <code class="code">eldoc-documentation-functions</code> variable,
adding a number of functions to it:
<ul class="itemize mark-minus">
<li><code class="code">eglot-hover-eldoc-function</code>, to display general information
about an identifier.
</li><li><code class="code">eglot-signature-eldoc-function</code>, to display function
signature information.
</li><li><code class="code">eglot-highlight-eldoc-function</code>, to highlight nearby
manifestations of an identifier.
</li><li><code class="code">eglot-code-action-suggestion</code>, to retrieve relevant code
actions at point.
</li></ul>

<p>A simple tweak to remove at-point identifier information for
hypothetical language <code class="code">Foo</code> may look like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(add-hook 'foo-mode-hook
  (lambda ()
    (add-hook 'eglot-managed-mode-hook
      (lambda ()
        (remove-hook 'eldoc-documentation-functions
                     'eglot-hover-eldoc-function
                     nil t))
      nil t)))
</pre></div>

<p>For more sophisticated changes, we can take advantage of ElDoc&rsquo;s
well-defined protocols.  See <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Programming-Language-Doc">Programming Language Doc</a> in <cite class="cite">GNU
Emacs Manual</cite>.  For instance, the functions in
<code class="code">eldoc-display-functions</code> control displays of the at-point
documentation produced by <code class="code">eldoc-documentation-functions</code>.  As an
example, to ensure that hover documentation specifically is never output
into the Echo area (in all programming modes):
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(require 'cl-lib)

(defun my/special-eglot-hover-function (cb &amp;rest _ignored)
  &quot;Same as `eglot-hover-eldoc-function`, but skip the echo area.&quot;
  (eglot-hover-eldoc-function (lambda (info &amp;rest _ignore)
                                (funcall cb info :echo 'skip))))

;; substitute 'eldoc-hover-eldoc-function with our &quot;fixed&quot; variant.
(add-hook
  'eglot-managed-mode-hook
  (lambda ()
    (setq-local eldoc-documentation-functions
                (cl-substitute #'my/special-eglot-hover-function
                               'eglot-hover-eldoc-function
                               eldoc-documentation-functions))))
</pre></div>

</li><li>Eglot hooks onto Flymake&rsquo;s <code class="code">flymake-diagnostic-functions</code> variable,
completely replacing its value with Eglot&rsquo;s own
<code class="code">eglot-flymake-backend</code> function.  Additional backends may be added
to work alongside Eglot&rsquo;s.

<div class="example lisp">
<pre class="lisp-preformatted">(add-hook 'foo-mode-hook
  (lambda ()
    (add-hook 'eglot-managed-mode-hook
      (lambda ()
        (add-hook 'flymake-diagnostic-functions
                  #'my/special-foo-mode-backend
                  nil t))
      nil t)))
</pre></div>

</li><li>Eglot hooks onto Xref&rsquo;s <code class="code">xref-backend-functions</code> variable, adding
its own <code class="code">eglot-xref-backend</code> function to it.

</li><li>Eglot hooks onto Imenu&rsquo;s <code class="code">imenu-create-index-function</code>.

</li><li>Eglot hooks onto Emacs&rsquo;s <code class="code">completion-at-point-functions</code>.

</li><li>Eglot hooks onto Company&rsquo;s <code class="code">company-backends</code> variable, ensuring
only the <code class="code">company-capf</code> backend lives there.  This ensures the same
set of completions as regular <code class="code">completion-at-point</code>.

</li><li>Eglot hooks onto YASnippet by automatically activating
<code class="code">yas-minor-mode</code> when needed to expand server-provided snippets.
</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Advanced-server-configuration">
<div class="nav-panel">
<p>
Next: <a href="#Extending-Eglot" accesskey="n" rel="next">Extending Eglot</a>, Previous: <a href="#Customizing-Eglot" accesskey="p" rel="prev">Customizing Eglot</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Advanced-server-configuration-1"><span>5 Advanced server configuration<a class="copiable-link" href="#Advanced-server-configuration-1"> &para;</a></span></h2>

<p>Though many language servers work well out-of-the-box, most allow
fine-grained control of their operation via specific configuration
options that are transmitted over the LSP protocol and vary from server
to server.  A small number of servers require such special configuration
to work acceptably, or even to work at all.
</p>
<p>After having setup a server executable program in
<code class="code">eglot-server-programs</code> (see <a class="pxref" href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a>) and
ensuring Eglot can invoke it, you may want to take advantage of some of
these options.  You should first distinguish two main kinds of server
configuration:
</p>
<ul class="itemize mark-bullet">
<li>Project-specific, applying to a specific project;

</li><li>User-specific, applying to all projects the server is used for.
</li></ul>

<p>When you have decided which kind you need, the following sections
teach how Eglot&rsquo;s user variables can be used to achieve it:
</p>

<p>It&rsquo;s important to note that not all servers allow both kinds of
configuration, nor is it guaranteed that user options can be copied over
to project options, and vice-versa.  When in doubt, consult your
language server&rsquo;s documentation.
</p>
<p>It&rsquo;s also worth noting that some language servers can read these
settings from configuration files in the user&rsquo;s <code class="code">HOME</code> directory or
in a project&rsquo;s directory.  For example, the <code class="command">pylsp</code> Python
server reads the file <samp class="file">~/.config/pycodestyle</samp> for user
configuration.  The <code class="command">clangd</code> C/C++ server reads both
<samp class="file">~/.config/clangd/config.yaml</samp> for user configuration and
<samp class="file">.clangd</samp> for project configuration.  It may be advantageous to use
these mechanisms instead of Eglot&rsquo;s, as this will probably work with
other LSP clients and may be easier to debug than options riding on the
LSP wire.
</p>
<ul class="mini-toc">
<li><a href="#Project_002dspecific-configuration" accesskey="1">Project-specific configuration</a></li>
<li><a href="#User_002dspecific-configuration" accesskey="2">User-specific configuration</a></li>
<li><a href="#JSONRPC-objects-in-Elisp" accesskey="3">JSONRPC objects in Elisp</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Project_002dspecific-configuration">
<div class="nav-panel">
<p>
Next: <a href="#User_002dspecific-configuration" accesskey="n" rel="next">User-specific configuration</a>, Up: <a href="#Advanced-server-configuration" accesskey="u" rel="up">Advanced server configuration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Project_002dspecific-configuration-1"><span>5.1 Project-specific configuration<a class="copiable-link" href="#Project_002dspecific-configuration-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-eglot_002dworkspace_002dconfiguration"></a>
<a class="index-entry-id" id="index-workspace-configuration"></a>

<p>To set project-specific settings, which the LSP specification calls
<em class="dfn">workspace configuration</em>, the variable
<code class="code">eglot-workspace-configuration</code> may be used.
</p>
<p>This variable is a directory-local variable (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Directory-Variables">Per-directory Local Variables</a> in <cite class="cite">The GNU Emacs Manual</cite>).  It&rsquo;s
important to recognize that this variable really only makes sense when
set directory-locally.  It usually does not make sense to set it
file-locally or in a major-mode hook.
</p>
<p>The most common way to set <code class="code">eglot-workspace-configuration </code> is
using a <samp class="file">.dir-locals.el</samp> file in the root of your project.  If you
can&rsquo;t do that, you may also set it from Elisp code via the
<code class="code">dir-locals-set-class-variables</code> function.  (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Directory-Local-Variables">Directory Local
Variables</a> in <cite class="cite">GNU Emacs Lisp Reference Manual</cite>).
</p>
<p>However you choose to set it, the variable&rsquo;s value is a plist
(see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Property-Lists">Property Lists</a> in <cite class="cite">GNU Emacs Lisp Reference Manual</cite>) with
the following format:
</p>
<div class="example lisp">
<pre class="lisp-preformatted"> (<var class="var">:server1</var> <var class="var">plist1</var> <var class="var">:server2</var> <var class="var">plist2</var> ...)
</pre></div>

<p>Here, <var class="var">:server1</var> and <var class="var">:server2</var> are keywords whose names
identify the LSP language servers to target.  Consult server
documentation to find out what name to use.  <var class="var">plist1</var> and
<var class="var">plist2</var> are plists of options, possibly nesting other plists.
</p>
<a class="index-entry-id" id="index-eglot_002dshow_002dworkspace_002dconfiguration"></a>
<p>When experimenting with workspace settings, you can use the command
<kbd class="kbd">M-x eglot-show-workspace-configuration</kbd> to inspect and debug the
value of this variable in its final JSON form, ready to be sent to the
server (see <a class="pxref" href="#JSONRPC-objects-in-Elisp">JSONRPC objects in Elisp</a>).  This helper command works
even before actually connecting to the server.
</p>
<p>These variable&rsquo;s value doesn&rsquo;t take effect immediately.  That happens
upon establishing the connection, in response to an explicit query from
the server, or when issuing the command <kbd class="kbd">M-x
eglot-signal-didChangeConfiguration</kbd> which notifies the server during an
ongoing Eglot session.
</p>
<ul class="mini-toc">
<li><a href="#Examples" accesskey="1">Examples</a></li>
</ul>
<div class="subsection-level-extent" id="Examples">
<h4 class="subsection"><span>5.1.1 Examples<a class="copiable-link" href="#Examples"> &para;</a></span></h4>

<p>For some users, setting <code class="code">eglot-workspace-configuration</code> is a
somewhat daunting task.  One of the reasons is having to manage the
general Elisp syntax of per-mode directory-local variables, which uses
alists (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Association-Lists">Association Lists</a> in <cite class="cite">GNU Emacs Lisp Reference
Manual</cite>), and the specific syntax of Eglot&rsquo;s variable, which uses
plists.  Some examples are useful.
</p>
<p>Let&rsquo;s say you want to configure two language servers to be used in a
project written in a combination of the Python and Go languages.  You
want to use the <code class="command">pylsp</code> and <code class="command">gopls</code> languages servers.
In the documentation of the servers in question (or in some other
editor&rsquo;s configuration file, or in some blog article), you find the
following configuration options in informal dotted-notation syntax:
</p>
<div class="example">
<pre class="example-preformatted">pylsp.plugins.jedi_completion.include_params: true
pylsp.plugins.jedi_completion.fuzzy: true
pylsp.pylint.enabled: false
gopls.usePlaceholders: true
</pre></div>

<p>To apply this to Eglot, and assuming you chose the
<samp class="file">.dir-locals.el</samp> file method, the contents of that file could be:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">((nil
  . ((eglot-workspace-configuration
      . (:pylsp (:plugins (:jedi_completion (:include_params t
                                             :fuzzy t)
                           :pylint (:enabled :json-false)))
         :gopls (:usePlaceholders t)))))
 (python-base-mode . ((indent-tabs-mode . nil)))
 (go-mode          . ((indent-tabs-mode . t))))
</pre></div>

<p>This sets the value of <code class="code">eglot-workspace-configuration</code> in all the
buffers inside the project; each server will use only the section of the
parameters intended for that server, and ignore the rest.  Note how
alists are used for associating Emacs mode names with alists associating
variable names with variable values.  Then notice how plists are used
inside the value of <code class="code">eglot-workspace-configuration</code>.
</p>
<p>This following form may also be used:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">((python-base-mode
  . ((eglot-workspace-configuration
      . (:pylsp (:plugins (:jedi_completion (:include_params t
                                             :fuzzy t)
                           :pylint (:enabled :json-false)))))
     (indent-tabs-mode . nil)))
 (go-mode
  . ((eglot-workspace-configuration
      . (:gopls (:usePlaceholders t)))
     (indent-tabs-mode . t))))
</pre></div>

<p>This sets up the value of <code class="code">eglot-workspace-configuration</code>
separately depending on the major mode of each of that project&rsquo;s
buffers.  <code class="code">python-base-mode</code> buffers will have the variable set to
<code class="code">(:pylsp (:plugins ...))</code>.  <code class="code">go-mode</code> buffers will have the
variable set to <code class="code">(:gopls (:usePlaceholders t))</code>.
</p>
<p>Some servers will issue workspace configuration for specific files
inside your project.  For example, if you know <code class="code">gopls</code> is asking
about specific files in the <code class="code">src/imported</code> subdirectory and you
want to set a different option for <code class="code">gopls.usePlaceholders</code> , you
may use something like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">((python-base-mode
  . ((eglot-workspace-configuration
      . (:pylsp (:plugins (:jedi_completion (:include_params t
                                             :fuzzy t)
                           :pylint (:enabled :json-false)))))
     (indent-tabs-mode nil)))
 (go-mode
  . ((eglot-workspace-configuration
      . (:gopls (:usePlaceholders t)))
     (indent-tabs-mode t)))
 (&quot;src/imported&quot;
   . ((eglot-workspace-configuration
      . (:gopls (:usePlaceholders nil))))))
</pre></div>

<p>Finally, if one needs to determine the workspace configuration based on
some dynamic context, <code class="code">eglot-workspace-configuration</code> can be set to
a function.  The function is called with the <code class="code">eglot-lsp-server</code>
instance of the connected server (if any) and with
<code class="code">default-directory</code> set to the root of the project.  The function
should return a plist suitable for use as the variable&rsquo;s value.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="User_002dspecific-configuration">
<div class="nav-panel">
<p>
Next: <a href="#JSONRPC-objects-in-Elisp" accesskey="n" rel="next">JSONRPC objects in Elisp</a>, Previous: <a href="#Project_002dspecific-configuration" accesskey="p" rel="prev">Project-specific configuration</a>, Up: <a href="#Advanced-server-configuration" accesskey="u" rel="up">Advanced server configuration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="User_002dspecific-configuration-1"><span>5.2 User-specific configuration<a class="copiable-link" href="#User_002dspecific-configuration-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-initializationOptions"></a>
<a class="index-entry-id" id="index-command_002dline-arguments"></a>

<p>This kind of configuration applies to all projects the server is used
for.  Here, there are a number of ways to do this inside Eglot.
</p>
<p>A common way is to pass command-line options to the server invocation
via <code class="code">eglot-server-programs</code>.  Let&rsquo;s say we want to configure where
the <code class="command">clangd</code> server reads its <code class="code">compile_commands.json</code> from.
This can be done like so:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               `(c++-mode . (&quot;clangd&quot; &quot;--compile-commands-dir=/tmp&quot;))))

</pre></div>

<p>Another way is to have Eglot pass a JSON object to the server during the
LSP handshake.  This is done using the <code class="code">:initializationOptions</code>
syntax of <code class="code">eglot-server-programs</code>:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(with-eval-after-load 'eglot
  (add-to-list 'eglot-server-programs
               `(c++-mode . (&quot;clangd&quot; :initializationOptions
                                      (:compilationDatabasePath &quot;/tmp&quot;)))))
</pre></div>

<p>The argument <code class="code">(:compilationDatabasePath &quot;/tmp&quot;)</code> is Emacs&rsquo;s
representation in plist format of a simple JSON object
<code class="code">{&quot;compilationDatabasePath&quot;: &quot;/tmp&quot;}</code>.  To learn how to represent
more deeply nested options in this format, see <a class="pxref" href="#JSONRPC-objects-in-Elisp">JSONRPC objects in Elisp</a>.
</p>
<p>In this case, the two examples achieve exactly the same, but notice how
the option&rsquo;s name has changed between them.
</p>
<a class="index-entry-id" id="index-eglot_002dworkspace_002dconfiguration-1"></a>
<p>Finally there is another way to do user-specific configuration of
language servers, which may be used if the methods above are not
supported.  It consists of <em class="emph">globally</em> setting
<code class="code">eglot-workspace-configuration</code>, a variable originally intended for
project-specific configuration.  This has the same effect as giving all
your projects a certain default configuration, as described in
<a class="ref" href="#Project_002dspecific-configuration">Project-specific configuration</a>.  Here is an example:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(setq-default eglot-workspace-configuration
              '(:pylsp (:plugins (:jedi_completion (:include_params t
                                                    :fuzzy t)
                                  :pylint (:enabled :json-false)))
                :gopls (:usePlaceholders t)))
</pre></div>

<p>Note that the global value of <code class="code">eglot-workspace-configuration</code> is
always overridden if a directory-local value is detected.
</p>
<hr>
</div>
<div class="section-level-extent" id="JSONRPC-objects-in-Elisp">
<div class="nav-panel">
<p>
Previous: <a href="#User_002dspecific-configuration" accesskey="p" rel="prev">User-specific configuration</a>, Up: <a href="#Advanced-server-configuration" accesskey="u" rel="up">Advanced server configuration</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="JSONRPC-objects-in-Elisp-1"><span>5.3 JSONRPC objects in Elisp<a class="copiable-link" href="#JSONRPC-objects-in-Elisp-1"> &para;</a></span></h3>

<p>Emacs&rsquo;s preferred way of representing JSON is via Lisp lists.  In Eglot,
the syntax of this list is the simplest possible (the one with fewer
parenthesis), a plist (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Property-Lists">Property Lists</a> in <cite class="cite">GNU Emacs Lisp
Reference Manual</cite>).
</p>
<p>The plist may be arbitrarily complex, and generally containing other
keyword-value property sub-plists corresponding to JSON sub-objects.
</p>
<p>For representing the JSON leaf values <code class="code">true</code>, <code class="code">false</code>,
<code class="code">null</code> and <code class="code">{}</code>, you can use the Lisp values <code class="code">t</code>,
<code class="code">:json-false</code>, <code class="code">nil</code>, and <code class="code">eglot-{}</code>, respectively.
JSON arrays are represented as Elisp vectors surrounded by square
brackets (see <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Vectors">Vectors</a> in <cite class="cite">GNU Emacs Lisp Reference Manual</cite>).
</p>
<p>For example, the plist
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(:pylsp (:plugins (:jedi_completion (:include_params t
                                     :fuzzy t
                                     :cache_for [&quot;pandas&quot; &quot;numpy&quot;])
                   :pylint (:enabled :json-false)))
 :gopls (:usePlaceholders t))
</pre></div>

<p>is serialized by Eglot to the following JSON text:
</p>
<div class="example">
<pre class="example-preformatted">{
  &quot;pylsp&quot;: {
    &quot;plugins&quot;: {
      &quot;jedi_completion&quot;: {
        &quot;include_params&quot;: true,
        &quot;fuzzy&quot;: true,
        &quot;cache_for&quot;: [ &quot;pandas&quot;, &quot;numpy&quot; ]
      },
      &quot;pylint&quot;: {
        &quot;enabled&quot;: false
      }
    }
  },
  &quot;gopls&quot;: {
    &quot;usePlaceholders&quot;: true
  }
}
</pre></div>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Extending-Eglot">
<div class="nav-panel">
<p>
Next: <a href="#Troubleshooting-Eglot" accesskey="n" rel="next">Troubleshooting Eglot</a>, Previous: <a href="#Advanced-server-configuration" accesskey="p" rel="prev">Advanced server configuration</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Extending-Eglot-1"><span>6 Extending Eglot<a class="copiable-link" href="#Extending-Eglot-1"> &para;</a></span></h2>

<p>Sometimes it may be useful to extend existing Eglot functionality using
Elisp its public methods.  A good example of when this need may arise is
adding support for a custom LSP protocol extension only implemented by a
specific server.
</p>
<p>The best source of documentation for this is probably Eglot source code
itself, particularly the section marked &ldquo;API&rdquo;.
</p>
<p>Most of the functionality is implemented with Common-Lisp style generic
functions (see <a data-manual="eieio" href="https://www.gnu.org/software/emacs/manual/html_mono/eieio.html#Generics">Generics</a> in <cite class="cite">EIEIO</cite>) that can be easily extended
or overridden.  The Eglot code itself is an example on how to do this.
</p>
<p>The following is a relatively simple example that adds support for the
<code class="code">inactiveRegions</code> experimental feature introduced in version 17 of
the <code class="command">clangd</code> C/C++ language server++.
</p>
<p>Summarily, the feature works by first having the server detect the
Eglot&rsquo;s advertisement of the <code class="code">inactiveRegions</code> client capability
during startup, whereupon the language server will report a list of
regions of inactive code for each buffer.  This is usually code
surrounded by C/C++ <code class="code">#ifdef</code> macros that the preprocessor removes
based on compile-time information.
</p>
<p>The language server reports the regions by periodically sending a
<code class="code">textDocument/inactiveRegions</code> notification for each managed buffer
(see <a class="pxref" href="#Eglot-and-Buffers">Buffers, Projects, and Eglot</a>).  Normally, unknown server notifications are
ignored by Eglot, but we&rsquo;re going change that.
</p>
<p>Both the announcement of the client capability and the handling of the
new notification is done by adding methods to generic functions.
</p>
<ul class="itemize mark-bullet">
<li>The first method extends <code class="code">eglot-client-capabilities</code> using a simple
heuristic to detect if current server is <code class="command">clangd</code> and enables
the <code class="code">inactiveRegion</code> capability.

<div class="example lisp">
<pre class="lisp-preformatted">(cl-defmethod eglot-client-capabilities :around (server)
  (let ((base (cl-call-next-method)))
    (when (cl-find &quot;clangd&quot; (process-command
                              (jsonrpc--process server))
                   :test #'string-match)
      (setf (cl-getf (cl-getf base :textDocument)
                     :inactiveRegionsCapabilities)
            '(:inactiveRegions t)))
    base))
</pre></div>

<p>Notice we use an internal function of the <code class="code">jsonrpc.el</code> library, and
a regexp search to detect <code class="command">clangd</code>.  An alternative would be to
define a new EIEIO subclass of <code class="code">eglot-lsp-server</code>, maybe called
<code class="code">eglot-clangd</code>, so that the method would be simplified:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(cl-defmethod eglot-client-capabilities :around ((_s eglot-clangd))
  (let ((base (cl-call-next-method)))
    (setf (cl-getf (cl-getf base :textDocument)
                     :inactiveRegionsCapabilities)
            '(:inactiveRegions t))))
</pre></div>

<p>However, this would require that users tweak <code class="code">eglot-server-program</code>
to tell Eglot instantiate such sub-classes instead of the generic
<code class="code">eglot-lsp-server</code> (see <a class="pxref" href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a>).  For the
purposes of this particular demonstration, we&rsquo;re going to use the more
hacky regexp route which doesn&rsquo;t require that.
</p>
<p>Note, however, that detecting server versions before announcing new
capabilities is generally not needed, as both server and client are
required by LSP to ignore unknown capabilities advertised by their
counterparts.
</p>
</li><li>The second method implements <code class="code">eglot-handle-notification</code> to process
the server notification for the LSP method
<code class="code">textDocument/inactiveRegions</code>.  For each region received it
creates an overlay applying the <code class="code">shadow</code> face to the region.
Overlays are recreated every time a new notification of this kind is
received.

<p>To learn about how <code class="command">clangd</code>&rsquo;s special JSONRPC notification
message is structured in detail you could consult that server&rsquo;s
documentation.  Another possibility is to evaluate the first
capability-announcing method, reconnect to the server and peek in the
events buffer (see <a class="pxref" href="#Eglot-Commands">eglot-events-buffer</a>).  You could
find something like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">[server-notification] Mon Sep  4 01:10:04 2023:
(:jsonrpc &quot;2.0&quot; :method &quot;textDocument/inactiveRegions&quot; :params
          (:textDocument
           (:uri &quot;file:///path/to/file.cpp&quot;)
           :regions
           [(:start (:character 0 :line 18)
             :end (:character 58 :line 19))
            (:start (:character 0 :line 36)
             :end (:character 1 :line 38))]))
</pre></div>

<p>This reveals that the <code class="code">textDocument/inactiveRegions</code> notification
contains a <code class="code">:textDocument</code> property to designate the managed buffer
and an array of LSP regions under the <code class="code">:regions</code> property.  Notice
how the message (originally in JSON format), is represented as Elisp
plists (see <a class="pxref" href="#JSONRPC-objects-in-Elisp">JSONRPC objects in Elisp</a>).
</p>
<p>The Eglot generic function machinery will automatically destructure the
incoming message, so these two properties can simply be added to the new
method&rsquo;s lambda list as <code class="code">&amp;key</code> arguments.  Also, the
<code class="code">eglot-uri-to-path</code> and <code class="code">eglot-range-region</code> may be used to
easily parse the LSP <code class="code">:uri</code> and <code class="code">:start ... :end ...</code>  objects
to obtain Emacs objects for file names and positions.
</p>
<p>The remainder of the implementation consists of standard Elisp
techniques to loop over arrays, manage buffers and overlays.
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(cl-defmethod eglot-handle-notification
  (_server (_method (eql textDocument/inactiveRegions))
           &amp;key regions textDocument &amp;allow-other-keys)
  (if-let* ((path (expand-file-name (eglot-uri-to-path
                                     (cl-getf textDocument :uri))))
            (buffer (find-buffer-visiting path)))
      (with-current-buffer buffer
        (remove-overlays nil nil 'inactive-code t)
        (cl-loop
         for r across regions
         for (beg . end) = (eglot-range-region r)
         for ov = (make-overlay beg end)
         do
         (overlay-put ov 'face 'shadow)
         (overlay-put ov 'inactive-code t)))))
</pre></div>

</li></ul>

<p>After evaluating these two additions and reconnecting to the
<code class="command">clangd</code> language server (version 17), the result will be that
all the inactive code in the buffer will be nicely grayed out using the
LSP server knowledge about current compile time preprocessor defines.
</p>
<hr>
</div>
<div class="chapter-level-extent" id="Troubleshooting-Eglot">
<div class="nav-panel">
<p>
Next: <a href="#GNU-Free-Documentation-License" accesskey="n" rel="next">GNU Free Documentation License</a>, Previous: <a href="#Extending-Eglot" accesskey="p" rel="prev">Extending Eglot</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Troubleshooting-Eglot-1"><span>7 Troubleshooting Eglot<a class="copiable-link" href="#Troubleshooting-Eglot-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-troubleshooting-Eglot"></a>

<p>This chapter documents commands and variables that can be used to
troubleshoot Eglot problems.  It also provides guidelines for
reporting Eglot bugs in a way that facilitates their resolution.
</p>
<p>When you encounter problems with Eglot, try first using the commands
<kbd class="kbd">M-x eglot-events-buffer</kbd> and <kbd class="kbd">M-x eglot-stderr-buffer</kbd>.  They
pop up special buffers that can be used to inspect the communications
between the Eglot and language server.  In many cases, this will
indicate the problems or at least provide a hint.
</p>

<ul class="mini-toc">
<li><a href="#Performance" accesskey="1">Performance</a></li>
<li><a href="#Getting-the-latest-version" accesskey="2">Getting the latest version</a></li>
<li><a href="#Reporting-bugs" accesskey="3">Reporting bugs</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Performance">
<div class="nav-panel">
<p>
Next: <a href="#Getting-the-latest-version" accesskey="n" rel="next">Getting the latest version</a>, Up: <a href="#Troubleshooting-Eglot" accesskey="u" rel="up">Troubleshooting Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Performance-1"><span>7.1 Performance<a class="copiable-link" href="#Performance-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-performance-problems_002c-with-Eglot"></a>
<p>A common and easy-to-fix cause of performance problems in Eglot
(especially in older versions) is its events buffer, since it represents
additional work that Eglot must do (see <a class="pxref" href="#Eglot-Commands">eglot-events-buffer</a>).  If you find Eglot is operating correctly but
slowly, try to customize the variable <code class="code">eglot-events-buffer-config</code>
(see <a class="pxref" href="#Customization-Variables">Customization Variables</a>) and set its <code class="code">:size</code> property to
0.  This will disable recording any events and may speed things up.
</p>
<p>In other situations, the cause of poor performance lies in the language
server itself.  Servers use aggressive caching and other techniques to
improve their performance.  Often, this can be tweaked by changing the
server configuration (see <a class="pxref" href="#Advanced-server-configuration">Advanced server configuration</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Getting-the-latest-version">
<div class="nav-panel">
<p>
Next: <a href="#Reporting-bugs" accesskey="n" rel="next">Reporting bugs</a>, Previous: <a href="#Performance" accesskey="p" rel="prev">Performance</a>, Up: <a href="#Troubleshooting-Eglot" accesskey="u" rel="up">Troubleshooting Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Getting-the-latest-version-1"><span>7.2 Getting the latest version<a class="copiable-link" href="#Getting-the-latest-version-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-upgrading-Eglot"></a>

<p>To install the latest Eglot in an Emacs version that does not bundle
Eglot, use <kbd class="kbd">M-x package-install</kbd>.
</p>
<p>Often, a newer Eglot version exists that has fixed a longstanding bug,
has more LSP features, or just better supports a particular language
server.  Recent Eglot versions can self-update via the command <kbd class="kbd">M-x
eglot-upgrade-eglot</kbd>.  This will replace any currently installed version
with the newest one available from the ELPA archives configured in
<code class="code">package-archives</code>.
</p>
<p>You can also update Eglot through other methods, such as
<code class="code">use-package</code> (see <a data-manual="use-package" href="https://www.gnu.org/software/emacs/manual/html_mono/use-package.html#Installing-packages">Installing packages</a> in <cite class="cite">use-package User Manual</cite>), <code class="code">package-install</code>, <code class="code">list-packages</code>
or the newer <code class="code">package-upgrade</code> (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Packages">Packages</a> in <cite class="cite">GNU Emacs
Manual</cite>).  However, do read the docstrings of the command you intend to
use before you use it, as some of them may not work in exactly the same
way across Emacs versions, meaning your configuration may be not
portable.
</p>
<hr>
</div>
<div class="section-level-extent" id="Reporting-bugs">
<div class="nav-panel">
<p>
Previous: <a href="#Getting-the-latest-version" accesskey="p" rel="prev">Getting the latest version</a>, Up: <a href="#Troubleshooting-Eglot" accesskey="u" rel="up">Troubleshooting Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reporting-bugs-1"><span>7.3 Reporting bugs<a class="copiable-link" href="#Reporting-bugs-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-bug-reports"></a>

<p>If you think you have found a bug, we want to hear about it.  Before
reporting a bug, keep in mind that interaction with language servers
represents a large quantity of unknown variables.  Therefore, it is
generally both <em class="emph">difficult</em> and <em class="emph">absolutely essential</em> that the
maintainers reproduce bugs exactly as they happened to you, the user.
</p>
<p>To report an Eglot bug, send e-mail to <a class="email" href="mailto:bug-gnu-emacs@gnu.org">bug-gnu-emacs@gnu.org</a>.
</p>
<p>To understand how to write this email, get acquainted with Emacs&rsquo;s bug
reporting guidelines (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Bugs">Bugs</a> in <cite class="cite">GNU Emacs Manual</cite>).  Then,
follow this Eglot-specific checklist:
</p>
<ol class="enumerate">
<li> Include the transcript of JSONRPC events obtained from the buffer popped
up by <kbd class="kbd">M-x eglot-events-buffer</kbd>.  You may narrow down the transcript
if you are sure of where the problematic exchange is, but it&rsquo;s safer to
include the whole transcript, either attached or inline.

</li><li> If Emacs signaled an error (an error message was seen or heard), make
sure to repeat the process after turning on <code class="code">debug-on-error</code> via
<kbd class="kbd">M-x toggle-debug-on-error</kbd>.  This normally produces a backtrace of
the error that should also be attached to the bug report.

</li><li> Include a description of how the maintainer should obtain, install, and
configure the language server you used.  Maintainers usually have access
to GNU/Linux systems, though not necessarily the distribution that you
may be using.  If possible, try to replicate the problem with the
C/C<code class="t">++</code> or Python servers, as these are very easy to install.

</li><li> Describe how to setup a <em class="emph">minimal</em> project directory where Eglot
should be started for the problem to happen.  Describe each file&rsquo;s name
and its contents.  Alternatively, you can supply the address of a public
Git repository.

</li><li> Include versions of the software used.  The Emacs version can be
obtained with <kbd class="kbd">M-x emacs-version</kbd>.

<p>We welcome bug reports about all Eglot versions, but it is helpful to
first check if the problem isn&rsquo;t already fixed in the latest version
(see <a class="pxref" href="#Getting-the-latest-version">Getting the latest version</a>).
</p>
<p>It&rsquo;s also essential to include the version of ELPA packages that are
explicitly or implicitly loaded.  The optional but popular Company or
Markdown packages are distributed as GNU ELPA packages, not to mention
Eglot itself in some situations.  Some major modes (Go, Rust, etc.)  are
provided by ELPA packages.  It&rsquo;s sometimes easy to miss these, since
they are usually implicitly loaded when visiting a file in that
language.
</p>
<p>ELPA packages usually live in <code class="code">~/.emacs.d/elpa</code> (or what is in
<code class="code">package-user-dir</code>).  Including a listing of files in that
directory is a way to tell the maintainers about ELPA package versions.
</p>
</li><li> Include a recipe to replicate the problem with <em class="emph">a clean Emacs run</em>.
The invocation <code class="code">emacs -Q -f package-initialize</code> starts Emacs with
no configuration and initializes the ELPA packages.  A very minimal
<samp class="file">.emacs</samp> initialization file (10 lines or less) is also acceptable
and good means to describe changes to variables.

<p>There is usually no need to include <code class="code">require</code> statements in the
recipe, as Eglot&rsquo;s functionality uses autoloads.
</p>
<p>Likewise, there is rarely the need to use things like <code class="code">use-package</code>
or <code class="code">eglot-ensure</code>.  This just makes the recipe harder to follow.
Prefer setting variables with <code class="code">setq</code> and adding to hooks with
<code class="code">add-hook</code>.  Prefer starting Eglot with <code class="code">M-x eglot</code>.
</p>
</li><li> Make sure to double check all the above elements and re-run the recipe
to see that the problem is reproducible.  Following the recipe should
produce event transcript and error backtraces that are very similar to
the ones you included.  If the problem only happens sometimes, mention
this in your report.
</li></ol>

<p>Please keep in mind that some problems reported against Eglot may
actually be bugs in the language server or the Emacs feature/package
that used Eglot to communicate with the language server.  Eglot is, in
many cases, just a frontend to that functionality.
</p>
<hr>
</div>
</div>
<div class="appendix-level-extent" id="GNU-Free-Documentation-License">
<div class="nav-panel">
<p>
Next: <a href="#Index" accesskey="n" rel="next">Index</a>, Previous: <a href="#Troubleshooting-Eglot" accesskey="p" rel="prev">Troubleshooting Eglot</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="appendix" id="GNU-Free-Documentation-License-1"><span>Appendix A GNU Free Documentation License<a class="copiable-link" href="#GNU-Free-Documentation-License-1"> &para;</a></span></h2>
<div class="center">Version 1.3, 3 November 2008
</div>

<div class="display">
<pre class="display-preformatted">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a class="uref" href="https://fsf.org/">https://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol class="enumerate" start="0">
<li> PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em class="dfn">free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li> APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input
format, SGML or XML using a publicly available
DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples
of transparent image formats include PNG, XCF and
JPG.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are
not generally available, and the machine-generated HTML,
PostScript or PDF produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li> VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li> COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li> MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol class="enumerate" type="A" start="1">
<li> Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li> List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li> State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li> Preserve all the copyright notices of the Document.

</li><li> Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li> Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li> Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li> Include an unaltered copy of this License.

</li><li> Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li> Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li> For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li> Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li> Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li> Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li> Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li> COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li> COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li> AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li> TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li> TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li> FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a class="uref" href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li> RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>

<h3 class="heading" id="ADDENDUM_003a-How-to-use-this-License-for-your-documents"><span>ADDENDUM: How to use this License for your documents<a class="copiable-link" href="#ADDENDUM_003a-How-to-use-this-License-for-your-documents"> &para;</a></span></h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">  Copyright (C)  <var class="var">year</var>  <var class="var">your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div></div>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">    with the Invariant Sections being <var class="var">list their titles</var>, with
    the Front-Cover Texts being <var class="var">list</var>, and with the Back-Cover Texts
    being <var class="var">list</var>.
</pre></div></div>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>

<hr>
</div>
<div class="unnumbered-level-extent" id="Index">
<div class="nav-panel">
<p>
Previous: <a href="#GNU-Free-Documentation-License" accesskey="p" rel="prev">GNU Free Documentation License</a>, Up: <a href="#Top" accesskey="u" rel="up">Eglot</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Index-1"><span>Index<a class="copiable-link" href="#Index-1"> &para;</a></span></h2>
<div class="printindex cp-printindex">
<table class="cp-letters-header-printindex"><tr><th>Jump to: &nbsp; </th><td><a class="summary-letter-printindex" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-X"><b>X</b></a>
 &nbsp; 
</td></tr></table>
<table class="cp-entries-printindex" border="0">
<tr><td></td><th class="entries-header-printindex">Index Entry</th><th class="sections-header-printindex">Section</th></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-A">A</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-activating-Eglot-for-a-project">activating Eglot for a project</a></td><td class="printindex-index-section"><a href="#Starting-Eglot">Starting Eglot</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-B">B</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-buffers-managed-by-Eglot">buffers managed by Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bug-reports">bug reports</a></td><td class="printindex-index-section"><a href="#Reporting-bugs">Reporting bugs</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-C">C</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-call-hierarchy">call hierarchy</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-code-actions">code actions</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-command_002dline-arguments">command-line arguments</a></td><td class="printindex-index-section"><a href="#User_002dspecific-configuration">User-specific configuration</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-commands_002c-Eglot">commands, Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-customizing-Eglot">customizing Eglot</a></td><td class="printindex-index-section"><a href="#Customizing-Eglot">Customizing Eglot</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-D">D</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-documentation-using-Eglot">documentation using Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-E">E</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot"><code>eglot</code></a></td><td class="printindex-index-section"><a href="#Starting-Eglot">Starting Eglot</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dadvertise_002dcancellation"><code>eglot-advertise-cancellation</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dautoreconnect"><code>eglot-autoreconnect</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dautoshutdown"><code>eglot-autoshutdown</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dcode_002daction_002dindications"><code>eglot-code-action-indications</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dcode_002daction_002dindicator"><code>eglot-code-action-indicator</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dconfirm_002dserver_002dedits"><code>eglot-confirm-server-edits</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dconnect_002dhook"><code>eglot-connect-hook</code></a></td><td class="printindex-index-section"><a href="#Other-Variables">Other Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dconnect_002dtimeout"><code>eglot-connect-timeout</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002densure"><code>eglot-ensure</code></a></td><td class="printindex-index-section"><a href="#Starting-Eglot">Starting Eglot</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002devents_002dbuffer_002dconfig"><code>eglot-events-buffer-config</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dextend_002dto_002dxref"><code>eglot-extend-to-xref</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dignored_002dserver_002dcapabilities"><code>eglot-ignored-server-capabilities</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dmanaged_002dmode_002dhook"><code>eglot-managed-mode-hook</code></a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dmanaged_002dp"><code>eglot-managed-p</code></a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dmenu"><code>eglot-menu</code></a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dmode_002dline_002dformat"><code>eglot-mode-line-format</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dmode_002dmap"><code>eglot-mode-map</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dreport_002dprogress"><code>eglot-report-progress</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dserver_002dinitialized_002dhook"><code>eglot-server-initialized-hook</code></a></td><td class="printindex-index-section"><a href="#Other-Variables">Other Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dserver_002dprograms"><code>eglot-server-programs</code></a></td><td class="printindex-index-section"><a href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dshow_002dworkspace_002dconfiguration"><code>eglot-show-workspace-configuration</code></a></td><td class="printindex-index-section"><a href="#Project_002dspecific-configuration">Project-specific configuration</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dshutdown"><code>eglot-shutdown</code></a></td><td class="printindex-index-section"><a href="#Shutting-Down-LSP-Servers">Shutting Down LSP Servers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dstay_002dout_002dof"><code>eglot-stay-out-of</code></a></td><td class="printindex-index-section"><a href="#Other-Variables">Other Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dstrict_002dmode"><code>eglot-strict-mode</code></a></td><td class="printindex-index-section"><a href="#Other-Variables">Other Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dsync_002dconnect"><code>eglot-sync-connect</code></a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dworkspace_002dconfiguration"><code>eglot-workspace-configuration</code></a></td><td class="printindex-index-section"><a href="#Project_002dspecific-configuration">Project-specific configuration</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eglot_002dworkspace_002dconfiguration-1"><code>eglot-workspace-configuration</code></a></td><td class="printindex-index-section"><a href="#User_002dspecific-configuration">User-specific configuration</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ElDoc_002c-and-Eglot">ElDoc, and Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-F">F</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-features-in-buffers-supported-by-Eglot">features in buffers supported by Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Features">Eglot Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-finding-definitions-of-identifiers-using-Eglot">finding definitions of identifiers using Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Flymake_002c-and-Eglot">Flymake, and Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-I">I</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-imenu-navigation-using-Eglot">imenu navigation using Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-initializationOptions">initializationOptions</a></td><td class="printindex-index-section"><a href="#User_002dspecific-configuration">User-specific configuration</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-inlay-hints">inlay hints</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-L">L</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-language-server-for-Eglot">language server for Eglot</a></td><td class="printindex-index-section"><a href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-language-server-protocol">language server protocol</a></td><td class="printindex-index-section"><a href="#Top">Top</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LSP">LSP</a></td><td class="printindex-index-section"><a href="#Top">Top</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LSP-server-for-Eglot_002c-setting-up">LSP server for Eglot, setting up</a></td><td class="printindex-index-section"><a href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-M">M</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot"><code>M-x eglot</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcall_002dtype_002dhierarchy"><code>M-x eglot-call-type-hierarchy</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dclear_002dstatus"><code>M-x eglot-clear-status</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002daction_002dextract"><code>M-x eglot-code-action-extract</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002daction_002dinline"><code>M-x eglot-code-action-inline</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002daction_002dorganize_002dimports"><code>M-x eglot-code-action-organize-imports</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002daction_002dquickfix"><code>M-x eglot-code-action-quickfix</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002daction_002drewrite"><code>M-x eglot-code-action-rewrite</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dcode_002dactions"><code>M-x eglot-code-actions</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002devents_002dbuffer"><code>M-x eglot-events-buffer</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dforget_002dpending_002dcontinuations"><code>M-x eglot-forget-pending-continuations</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dformat"><code>M-x eglot-format</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dformat_002dbuffer"><code>M-x eglot-format-buffer</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dinlay_002dhints_002dmode"><code>M-x eglot-inlay-hints-mode</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dreconnect"><code>M-x eglot-reconnect</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002drename"><code>M-x eglot-rename</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dshow_002dtype_002dhierarchy"><code>M-x eglot-show-type-hierarchy</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dshutdown"><code>M-x eglot-shutdown</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dshutdown_002dall"><code>M-x eglot-shutdown-all</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dsignal_002ddidChangeConfiguration"><code>M-x eglot-signal-didChangeConfiguration</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-M_002dx-eglot_002dstderr_002dbuffer"><code>M-x eglot-stderr-buffer</code></a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mode_002dline-indication-of-language-server">mode-line indication of language server</a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mouse-clicks-on-mode_002dline_002c-and-Eglot">mouse clicks on mode-line, and Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-O">O</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-on_002dthe_002dfly-diagnostics-using-Eglot">on-the-fly diagnostics using Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-P">P</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-performance-problems_002c-with-Eglot">performance problems, with Eglot</a></td><td class="printindex-index-section"><a href="#Performance">Performance</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-progress">progress</a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-projects-and-Eglot">projects and Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-Q">Q</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-quick-start">quick start</a></td><td class="printindex-index-section"><a href="#Quick-Start">Quick Start</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-R">R</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-request-cancellation">request cancellation</a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-S">S</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-setting-up-LSP-server-for-Eglot">setting up LSP server for Eglot</a></td><td class="printindex-index-section"><a href="#Setting-Up-LSP-Servers">Setting Up LSP Servers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-shutting-down-LSP-server">shutting down LSP server</a></td><td class="printindex-index-section"><a href="#Shutting-Down-LSP-Servers">Shutting Down LSP Servers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-starting-Eglot">starting Eglot</a></td><td class="printindex-index-section"><a href="#Starting-Eglot">Starting Eglot</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-symbol-completion-using-Eglot">symbol completion using Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-T">T</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-troubleshooting-Eglot">troubleshooting Eglot</a></td><td class="printindex-index-section"><a href="#Troubleshooting-Eglot">Troubleshooting Eglot</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-type-hierarchy">type hierarchy</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-U">U</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-upgrading-Eglot">upgrading Eglot</a></td><td class="printindex-index-section"><a href="#Getting-the-latest-version">Getting the latest version</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-V">V</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-variables_002c-Eglot">variables, Eglot</a></td><td class="printindex-index-section"><a href="#Customization-Variables">Customization Variables</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-W">W</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-workspace">workspace</a></td><td class="printindex-index-section"><a href="#Eglot-and-Buffers">Eglot and Buffers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-workspace-configuration">workspace configuration</a></td><td class="printindex-index-section"><a href="#Project_002dspecific-configuration">Project-specific configuration</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-X">X</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-xref_002c-and-Eglot">xref, and Eglot</a></td><td class="printindex-index-section"><a href="#Eglot-Commands">Eglot Commands</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
</table>
<table class="cp-letters-footer-printindex"><tr><th>Jump to: &nbsp; </th><td><a class="summary-letter-printindex" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-X"><b>X</b></a>
 &nbsp; 
</td></tr></table>
</div>

</div>
</div>
<div class="footnotes-segment">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5 class="footnote-body-heading"><a id="FOOT1" href="#DOCF1">(1)</a></h5>
<p>A <em class="dfn">polyglot</em> is a person who is able to use several
languages.  </p>
</div>



</body>
</html>
